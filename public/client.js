(()=>{let t;var e,n,o=globalThis,i={},r={},a=o.parcelRequire3550;null==a&&((a=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},o.parcelRequire3550=a),(0,a.register)("bn4Dc",function(t,e){(function(){function e(t,n){return n?require(t):t.slice?e[o(t)]:function(n,i){t(n={exports:{}}),e[o(i)]=n.exports};function o(t){return t.split("/").slice(-1).toString().replace(".js","")}}e(function(t){String.random=function(t,e){var n="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)n+=e.charAt(Math.floor(Math.random()*e.length));return n},String.match=function(t,e){var n,o;return"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(n=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||o===e["="]&&(n=e["*"]||e[">"],t.slice(0,(n||"").length)===n||o===e["*"]&&(o!==e[">"]&&o!==e["<"]?t>=e[">"]&&t<=e["<"]:o!==e[">"]&&t>=e[">"]||o!==e["<"]&&t<=e["<"])))},String.hash=function(t,e){if("string"==typeof t){if(e=e||0,!t.length)return e;for(var n=0,o=t.length;n<o;++n)e=(e<<5)-e+t.charCodeAt(n)|0;return e}};var e,n,o,i,r,a,s,u,c,f,l,p,d,g,y,v,k,b,w=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,e){for(var n in t)if(w.call(t,n)&&(!e||-1==e.indexOf(n)))return!1;return!0},Object.keys=Object.keys||function(t){var e=[];for(var n in t)w.call(t,n)&&e.push(n);return e},i=setTimeout,r=0,a=0,s=typeof setImmediate!=""+o&&setImmediate||(typeof MessageChannel==""+o?i:((e=new MessageChannel).port1.onmessage=function(t){""==t.data&&n()},function(t){n=t,e.port2.postMessage("")})),u=i.check=i.check||typeof performance!=""+o&&performance||{now:function(){return+new Date}},i.hold=i.hold||9,i.poll=i.poll||function(t){if(i.hold>=u.now()-r&&a++<3333){t();return}s(function(){r=u.now(),t()},a=0)},p=(l=(f=setTimeout).turn=f.turn||function(t){1==p.push(t)&&d(y)}).s=[],d=f.poll,g=0,y=function(){(c=p[g++])&&c(),(g==p.length||99==g)&&(p=l.s=p.slice(g),g=0),p.length&&d(y)},b=(k=setTimeout).turn,(k.each=k.each||function(t,e,n,o){o=o||9,function i(r,a,s){if(a=(r=(t||[]).splice(0,o)).length){for(var u=0;u<a&&v===(s=e(r[u]));u++);if(v===s){b(i);return}}n&&n(s)}()})()})(e,"./shim"),e(function(t){t.exports=function t(e,n,o){if(!e)return{to:t};var i,r="function"==typeof n,e=(this.tag||(this.tag={}))[e]||r&&(this.tag[e]={tag:e,to:t._={next:function(t){var e;(e=this.to)&&e.next(t)}}});if(r){var a={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:n,the:e,on:this,as:o};return(a.back=e.last||e).to=a,e.last=a}return(e=e.to)&&i!==n&&e.next(n),e}})(e,"./onto"),e(function(t){t.exports=function(t){return null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&t!=1/0&&t!=-1/0&&t==t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}})(e,"./valid"),e(function(t){function n(){var t=+new Date;return s<t?(r=0,s=t+n.drift):s=t+(r+=1)/a+n.drift}e("./shim"),n.drift=0;var o,i=-1/0,r=0,a=999,s=i;n.is=function(t,e,n){var o=e&&t&&t._&&t._[">"]||n;if(o)return"number"==typeof(o=o[e])?o:i},n.ify=function(t,e,n,i,r){(t=t||{})._=t._||{},r&&(t._["#"]=r);var a=t._[">"]||(t._[">"]={});return o!==e&&"_"!==e&&("number"==typeof n&&(a[e]=n),o!==i&&(t[e]=i)),t},t.exports=n})(e,"./state"),e(function(t){e("./shim"),t.exports=function(t){var e={s:{}},n=e.s;t=t||{max:999,age:9e3},e.check=function(t){return!!n[t]&&o(t)};var o=e.track=function(i){var r=n[i]||(n[i]={});return r.was=e.now=+new Date,e.to||(e.to=setTimeout(e.drop,t.age+9)),o.ed&&o.ed(i),r};return e.drop=function(o){e.to=null,e.now=+new Date;var i=Object.keys(n);console.STAT&&console.STAT(e.now,+new Date-e.now,"dup drop keys"),setTimeout.each(i,function(i){var r=n[i];r&&(o||t.age)>e.now-r.was||delete n[i]},0,99)},e}})(e,"./dup"),e(function(t){e("./onto"),t.exports=function(t,e){if(this.on){var o=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var i=t["#"]||t,r=(this.tag||"")[i];if(!r)return;return e&&(clearTimeout((r=this.on(i,e)).err),r.err=setTimeout(function(){r.off()},o)),!0}var i=e&&e["#"]||n(9);if(!t)return i;var a=this.on(i,t,e);return a.err=a.err||setTimeout(function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})},o),i}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(n){function o(t){return t instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:t}):new o(t)}o.is=function(t){return t instanceof o||t&&t._&&t===t._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},e("./shim"),o.valid=e("./valid"),o.state=e("./state"),o.on=e("./onto"),o.dup=e("./dup"),o.ask=e("./ask"),function(){function t(n){if(n){if(n.out===t){this.to.next(n);return}var i,u=this.as,c=u.at||u,f=c.$,l=c.dup,p=n.DBG;if((i=n["#"])||(i=n["#"]=s(9)),!l.check(i)){if(l.track(i),i=n._,n._="function"==typeof i?i:function(){},n.$&&n.$===(n.$._||"").$||(n.$=f),n["@"]&&!n.put&&function(t){var e,n=t["@"]||"";if(!(e=n._)){var o=(o=t.$)&&(o=o._)&&(o=o.root)&&(o=o.dup);if(!(o=o.check(n)))return;t["@"]=o["#"]||t["@"];return}e.acks=(e.acks||0)+1,(e.err=t.err)&&(t["@"]=e["#"],r(e)),e.ok=t.ok||e.ok,e.stop||e.crack||(e.crack=e.match&&e.match.push(function(){a(e)})),a(e)}(n),!c.ask(n["@"],n)){if(p&&(p.u=+new Date),n.put){e(n);return}n.get&&o.on.get(n,f)}p&&(p.uc=+new Date),this.to.next(n),p&&(p.ua=+new Date),n.nts||n.NTS||(n.out=t,c.on("out",n),p&&(p.ue=+new Date))}}}function e(e){if(e){var n=e._||"",o=n.root=((n.$=e.$||"")._||"").root;if(e["@"]&&n.faith&&!n.miss){e.out=t,o.on("out",e);return}n.latch=o.hatch,n.match=o.hatch=[];var a=e.put,s=n.DBG=e.DBG,l=+new Date;if(d=d||l,!a["#"]||!a["."]){s&&(s.p=l),n["#"]=e["#"],n.msg=e,n.all=0,n.stun=1;var _=Object.keys(a);console.STAT&&console.STAT(l,((s||n).pk=+new Date)-l,"put sort");var $,x,j,T,S,O,D,A=0;!function t(o){if($!=A){if($=A,!(j=_[A])){console.STAT&&console.STAT(l,((s||n).pd=+new Date)-l,"put"),r(n);return}(T=a[j])?(D=T._)?j!==D["#"]?O=g+y(j)+"soul not same.":(S=D[">"])||(O=g+y(j)+"no state."):O=g+y(j)+"no meta.":O=g+y(j)+"no node.",x=Object.keys(T||{})}if(O){e.err=n.err=O,r(n);return}var d,N=0;for(o=o||0;o++<9&&(d=x[N++]);)if("_"!==d){var G=T[d],E=S[d];if(i===E){O=g+y(d)+"on"+y(j)+"no state.";break}if(!c(G)){O=g+y(d)+"on"+y(j)+"bad "+typeof G+y(G);break}(function t(e,n,o,i,r){var a,s=r._||"",u=s.root,c=u.graph,l=c[o]||p,d=f(l,n,1),g=l[n],y=s.DBG;(a=console.STAT)&&(!c[o]||!g)&&(a.has=(a.has||0)+1);var w=b();if(i>w){setTimeout(function(){t(e,n,o,i,r)},(a=i-w)>k?k:a),console.STAT&&console.STAT((y||s).Hf=+new Date,a,"future");return}if(!(i<d)){if(!s.faith&&i===d&&(e===g||v(e)<=v(g))&&!s.miss)return;s.stun++;var _=r["#"]+s.all++,$={toString:function(){return _},_:s};$.toJSON=$.toString,u.dup.track($)["#"]=r["#"],y&&(y.ph=y.ph||+new Date),u.on("put",{"#":$,"@":r["@"],put:{"#":o,".":n,":":e,">":i},ok:r.ok,_:s})}})(G,d,j,E,e),++w}if((x=x.slice(N)).length){u(t);return}++A,x=null,t(o)}()}}}function n(t){(e=(t._||"").DBG)&&(e.pa=+new Date,e.pm=e.pm||+new Date);var e,n,o=this.as,i=o.graph,a=t._,s=t.put,u=s["#"],c=s["."],f=s[":"],p=s[">"];t["#"],(n=a.msg)&&(n=n.put)&&(n=n[u])&&l(n,c,p,f,u),i[u]=l(i[u],c,p,f,u),(n=(o.next||"")[u])&&n.on("in",t),r(a),this.to.next(t)}function r(e,n){if(!(e.stop||!e.err&&0<--e.stun)&&(e.stop=1,o=e.root)){var o,i=e.match;i.end=1,i===o.hatch&&((i=e.latch)&&!i.end?o.hatch=i:delete o.hatch),e.hatch&&e.hatch(),setTimeout.each(e.match,function(t){t&&t()}),(n=e.msg)&&!e.err&&!n.err&&(n.out=t,e.root.on("out",n),_())}}function a(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?i:t.ok||{"":1}}))}o.create=function(e){e.root=e.root||e,e.graph=e.graph||{},e.on=e.on||o.on,e.ask=e.ask||o.ask,e.dup=e.dup||o.dup();var i=e.$.opt(e.opt);return e.once||(e.on("in",t,e),e.on("out",t,e),e.on("put",n,e),o.on("create",e),e.on("create",e)),e.once=1,i},o.on.put=e;var d,g="Error: Invalid graph!",y=function(t){return" '"+(""+t).slice(0,9)+"...' "},v=JSON.stringify,k=2147483647,b=o.state,w=0,_=function(){w>999&&-(w/(d-(d=+new Date)))>1&&(o.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){w=0})}}(),function(){function t(t,e){var n=+new Date,o=t._||{},r=o.DBG=t.DBG,a=t["#"],u=s(9),c=Object.keys(e||"").sort(),p=((e||"")._||"")["#"],d=(c.length,t.$._.root),g=e===d.graph[p];console.STAT&&console.STAT(n,((r||o).gk=+new Date)-n,"got keys"),e&&function t(){n=+new Date;for(var o,y,v,k=0,b={};k<9&&(y=c[k++]);)l(b,y,f(e,y),e[y],p);c=c.slice(k),(v={})[p]=b,b=v,g&&((o=function(){}).ram=o.faith=!0),v=c.length,console.STAT&&console.STAT(n,-(n-(n=+new Date)),"got copied some"),r&&(r.ga=+new Date),d.on("in",{"@":a,"#":u,put:b,"%":v?u=s(9):i,$:d.$,_:o,DBG:r,FOO:1}),console.STAT&&console.STAT(n,+new Date-n,"got in"),v&&setTimeout.turn(t)}(),e||d.on("in",{"@":t["#"]})}o.on.get=function(e,n){var o=n._,r=e.get,a=r["#"],s=o.graph[a],u=r["."],c=(o.next||(o.next={}))[a],p=(e._||{}).DBG=e.DBG;if(p&&(p.g=+new Date),!s)return o.on("get",e);if(u){if(("string"!=typeof u||i===s[u])&&!((c||"").next||"")[u]){o.on("get",e);return}s=l({},u,f(s,u),s[u],a)}s&&t(e,s),o.on("get",e)},o.on.get.ack=t}(),o.chain.opt=function(t){t=t||{};var e=this._,n=t.peers||t;return Object.plain(t)||(t={}),Object.plain(e.opt)||(e.opt=t),"string"==typeof n&&(n=[n]),Object.plain(e.opt.peers)||(e.opt.peers={}),n instanceof Array&&(t.peers={},n.forEach(function(n){var o={};o.id=o.url=n,t.peers[n]=e.opt.peers[n]=e.opt.peers[n]||o})),a(t,function t(e){var n=this[e];if(this&&this.hasOwnProperty(e)||"string"==typeof n||Object.empty(n)){this[e]=n;return}(!n||n.constructor===Object||n instanceof Array)&&a(n,t)}),e.opt.from=t,o.on("opt",e),e.opt.uuid=e.opt.uuid||function(t){return o.state().toString(36).replace(".","")+String.random(t||12)},this};var i,r,a=function(t,e){Object.keys(t).forEach(e,t)},s=String.random,u=setTimeout.turn,c=o.valid,f=o.state.is,l=o.state.ify,p={};o.log=function(){return o.log.off||r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(t,e,n){return(n=o.log.once)[t]=n[t]||0,n[t]++||o.log(e)},"undefined"!=typeof window&&((window.GUN=window.Gun=o).window=window);try{void 0!==t&&(t.exports=o)}catch(t){}n.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(r=console).only=function(t,e){return r.only.i&&t===r.only.i&&r.only.i++&&(r.log.apply(r,arguments)||e)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(t){e("./root").chain.back=function(t,e){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var i=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var r=0,a=t.length,s=i;r<a;r++)s=(s||o)[t[r]];return n!==s?e?this:s:(s=i.back)?s.$.back(t,e):void 0}if("function"==typeof t){for(var u,s={back:i};(s=s.back)&&n===(u=t(s,e)););return u}return"number"==typeof t?(i.back||i).$.back(t-1):this};var n,o={}})(e,"./back"),e(function(t){var n=e("./root");function o(t,e){if(e=e||this.as||t.$._,(!t.$$||this===n.on)&&t.put&&!e.soul){var o,i=t.put||"",r=i["="]||i[":"],a=e.root,s=a.$.get(i["#"]).get(i["."])._;if("string"!=typeof(r=c(r))){this===n.on&&((s.echo||(s.echo={}))[e.id]=e);return}if(!(s.echo||(s.echo={}))[e.id]||(a.pass||"")[e.id]){if(o=a.pass){if(o[r+e.id])return;o[r+e.id]=1}(s.echo||(s.echo={}))[e.id]=e,e.has&&(e.link=r);var u=a.$.get(s.link=r)._;(u.echo||(u.echo={}))[s.id]=s;var o=e.ask||"";(o[""]||e.lex)&&u.on("out",{get:{"#":r}}),setTimeout.each(Object.keys(o),function(t,e){t&&(e=o[t])&&e.on("out",{get:{"#":r,".":t}})},0,99)}}}function i(t,e){var n,o,r=t.put||"",s=a!==r["="]?r["="]:r[":"],u=e.root;if(a===s){if(e.soul&&a!==e.put||(o=(t.$$||t.$||"")._||"",t["@"]&&(a!==o.put||a!==e.put)))return;(n=e.link||t.linked)&&delete(u.$.get(n)._.echo||"")[e.id],e.has&&(e.link=null),e.put=a,setTimeout.each(Object.keys(e.next||""),function(t,o){(o=e.next[t])&&(n&&delete(u.$.get(n).get(t)._.echo||"")[o.id],o.on("in",{get:t,put:a,$:o.$}))},0,99);return}if(!e.soul&&!t.$$){if(n=c(s),o=t.$._||"",(n===o.link||e.has&&!o.link)&&(!(u.pass||"")[e.id]||"string"==typeof n))return;delete(o.echo||"")[e.id],i({get:e.get,put:a,$:t.$,linked:t.linked=t.linked||o.link},e)}}function r(t,e){var o=this.as,i=o.$._,r=(i.root,o.get||""),s=(t.put||"")[r["#"]]||"";if(!t.put||"string"==typeof r["."]&&a===s[r["."]]){if(a!==i.put||!i.soul&&!i.has)return;i.ack=(i.ack||0)+1,i.on("in",{get:i.get,put:i.put=a,$:i.$,"@":t["@"]});return}(t._||{}).miss=1,n.on.put(t)}n.chain.chain=function(t){var e,o=this._,i=new(t||this).constructor(this),r=i._;return r.root=e=o.root,r.id=++e.once,r.back=this._,r.on=n.on,r.on("in",n.on.in,r),r.on("out",n.on.out,r),i},n.on.out=function(t){var e,n,o=this.as,i=o.back,s=o.root;if(t.$||(t.$=o.$),this.to.next(t),o.err){o.on("in",{put:o.put=a,$:o.$});return}if(e=t.get){if(s.pass&&(s.pass[o.id]=o),o.lex&&Object.keys(o.lex).forEach(function(t){n[t]=o.lex[t]},n=t.get=t.get||{}),e["#"]||o.soul){if(e["#"]=e["#"]||o.soul,t["#"]||(t["#"]=u(9)),i=s.$.get(e["#"])._,e=e["."]){if(f(i.put,e)&&(n=i.ask&&i.ask[e],(i.ask||(i.ask={}))[e]=i.$.get(e)._,i.on("in",{get:e,put:{"#":i.soul,".":e,":":i.put[e],">":p(s.graph[i.soul],e)}}),n))return}else{if(n=i.ask&&i.ask[""],(i.ask||(i.ask={}))[""]=i,a!==i.put&&(i.on("in",i),n))return;t.$=i.$}return s.ask(r,t),s.on("in",t)}if(e["."])return o.get?(t={get:{".":o.get},$:o.$},(i.ask||(i.ask={}))[o.get]=t.$._):t={get:o.lex?t.get:{},$:o.$},i.on("out",t);(o.ask||(o.ask={}))[""]=o,o.get&&(e["."]=o.get,(i.ask||(i.ask={}))[o.get]=t.$._)}return i.on("out",t)},n.on.in=function(t,e){var n,r=(e=e||this.as).root,u=t.$||(t.$=e.$),f=(u||"")._||s,l=t.put||"",g=l["#"],y=l["."],v=a!==l["="]?l["="]:l[":"],k=l[">"]||-1/0;if(a!==t.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"])){if(!c(l)){if(!(g=((l||"")._||"")["#"])){console.log("chain not yet supported for",l,"...",t,e);return}return u=e.root.$.get(g),setTimeout.each(Object.keys(l).sort(),function(n){"_"!=n&&a!==(k=p(l,n))&&e.on("in",{$:u,put:{"#":g,".":n,"=":l[n],">":k},VIA:t})})}return void e.on("in",{$:f.back.$,put:{"#":g=f.back.soul,".":y=f.has||f.get,"=":l,">":p(f.back.put,y)},via:t})}(t.seen||"")[e.id]||((t.seen||(t.seen=function(){}))[e.id]=e,e!==f&&(Object.keys(t).forEach(function(e){l[e]=t[e]},l={}),l.get=e.get||l.get,e.soul||e.has?f.soul&&(l.$=e.$,l.$$=l.$$||f.$):l.$$$=l.$$$||e.$,t=l),i(t,e),(e.soul||t.$$)&&k>=p(r.graph[g],y)&&((l=r.$.get(g)._).put=d(l.put,y,k,v,g)),!f.soul&&k>=p(r.graph[g],y)&&(n=(r.$.get(g)._.next||"")[y])&&(n.put=v,"string"==typeof(l=c(v))&&(n.put=r.$.get(l)._.put||v)),this.to&&this.to.next(t),e.any&&setTimeout.each(Object.keys(e.any),function(n){(n=e.any[n])&&n(t)},0,99),e.echo&&setTimeout.each(Object.keys(e.echo),function(n){(n=e.echo[n])&&n.on("in",t)},0,99),((t.$$||"")._||f).soul&&(n=e.next)&&(n=n[y])&&(l={},Object.keys(t).forEach(function(e){l[e]=t[e]}),l.$=(t.$$||t.$).get(l.get=y),delete l.$$,delete l.$$$,n.on("in",l)),o(t,e))},n.on.link=o,n.on.unlink=i;var a,s={},u=String.random,c=n.valid,f=function(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)},l=n.state,p=l.is,d=l.ify})(e,"./chain"),e(function(t){var n=e("./root");function o(t){var e,n=this.at||this.on;if(!t||n.soul||n.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){if(n.map,(e=this.seen||(this.seen={}))[t])return!0;e[t]=!0}}n.chain.get=function(t,e,s){if("string"==typeof t){if(0==t.length)return(u=this.chain())._.err={err:n.log("0 length key!",t)},e&&e.call(u,u._.err),u;var u,c,f,l,p,d=this._;(u=(d.next||r)[t])||(u=t&&(l=(f=this._).next,p=this.chain()._,l||(l=f.next={}),l[p.get=t]=p,this===f.root.$?p.soul=t:(f.soul||f.has)&&(p.has=t),p)),u=u&&u.$}else if("function"==typeof t){if(!0===e)return y=this._,v=0,(g=y.soul||y.link)?t(g,s,y):y.jam?y.jam.push([t,s]):(y.jam=[[t,s]],this.get(function(t,e){if(!(i===t.put&&!y.root.opt.super&&(g=Object.keys(y.root.opt.peers).length)&&++v<=g)){e.rid(t);var o,r=(r=t.$)&&r._||{},a=0;for(g=y.jam,delete y.jam;o=g[a++];){var s=o[0];o=o[1],s&&s(r.link||r.soul||n.valid(t.put)||((t.put||{})._||{})["#"],o,t,e)}}},{out:{get:{".":!0}}})),this;u=this;var g,y,v,k,d=u._,b=e||{},w=d.root;b.at=d,b.ok=t;var _={};function $(t,e,o){if(!$.stun&&(!(r=w.pass)||r[k])){var r,a=t.$._,s=(t.$$||"")._,u=(s||a).put,c=!a.has&&!a.soul,f={};if((c||i===u)&&(u=i===((r=t.put)||"")["="]?i===(r||"")[":"]?r:r[":"]:r["="]),"string"==typeof(r=n.valid(u))&&(u=i===(r=w.$.get(r)._.put)?b.not?i:u:r),!b.not||i!==u){if(i===b.stun){if((r=w.stun)&&r.on&&(d.$.back(function(t){if(r.on(""+t.id,f={}),(f.run||0)<$.id)return f}),f.run||r.on(""+a.id,f={}),!f.run&&s&&r.on(""+s.id,f={}),$.id>f.run&&((!f.stun||f.stun.end)&&(f.stun=r.on("stun"),f.stun=f.stun&&f.stun.last),f.stun&&!f.stun.end))){(f.stun.add||(f.stun.add={}))[k]=function(){$(t,e,1)};return}if(i===u&&(o=0),(r=w.hatch)&&!r.end&&i===b.hatch&&!o){if(_[a.$._.id])return;_[a.$._.id]=1,r.push(function(){$(t,e,1)});return}_={}}if(w.pass){if(w.pass[k+a.id])return;w.pass[k+a.id]=1}if(b.on){b.ok.call(a.$,u,a.get,t,e||$);return}if(b.v2020){b.ok(t,e||$);return}Object.keys(t).forEach(function(e){r[e]=t[e]},r={}),(t=r).put=u,b.ok.call(b.as,t,e||$)}}}return $.at=d,(d.any||(d.any={}))[k=String.random(7)]=$,$.off=function(){$.stun=1,d.any&&delete d.any[k]},$.rid=o,$.id=b.run||++w.once,c=w.pass,(w.pass={})[k]=1,b.out=b.out||{get:{}},d.on("out",b.out),w.pass=c,u}else{if("number"==typeof t)return this.get(""+t,e,s);if("string"==typeof(c=a(t)))return this.get(c,e,s);(c=this.get.next)&&(u=c(this,t))}return u?e&&"function"==typeof e&&u.get(e,s):((u=this.chain())._.err={err:n.log("Invalid get request!",t)},e&&e.call(u,u._.err)),u};var i,r={},a=n.valid})(e,"./get"),e(function(t){var n=e("./root");function o(t,e){if(e){e=(e._||"").id||e;var o,i=t.root.stun||(t.root.stun={on:n.on}),r={};t.stun||(t.stun=i.on("stun",function(){})),(o=i.on(""+e))&&o.the.last.next(r),r.run>=t.run||i.on(""+e,function(e){if(t.stun.end){this.off(),this.to.next(e);return}e.run=e.run||t.run,e.stun=e.stun||t.stun})}}function i(t){if(t.err){i.end(t.stun,t.root);return}if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var e,o=t.$.back(-1)._,r=o.root,a=o.ask(function(e){r.on("ack",e),e.err&&!e.lack&&n.log(e),++s>(t.acks||0)&&this.off(),t.ack&&t.ack(e,this)},t.opt),s=0,u=t.stun;(e=function(){u&&(i.end(u,r),setTimeout.each(Object.keys(u=u.add||""),function(t){(t=u[t])&&t()}))}).hatch=e,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":a,_:e})}}n.chain.put=function(t,e,a){var f,l,p,d=this,g=d._,y=g.root;(a=a||{}).root=g.root,a.run||(a.run=y.once),o(a,g.id),a.ack=a.ack||e,a.via=a.via||d,a.data=a.data||t,a.soul||(a.soul=g.soul||"string"==typeof e&&e);var v=a.state=a.state||n.state();return"function"==typeof t?t(function(t){a.data=t,d.put(r,r,a)}):a.soul?(a.$=y.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||i,function t(){var e,r,s,f,l,p,d,g=a.todo,y=g.pop(),k=y.it;if(y.ref&&y.ref._.id,o(a,y.ref),(p=y.todo)&&(k=k[f=p.pop()],p.length&&g.push(y)),f&&(g.path||(g.path=[])).push(f),!(s=u(k))&&!(d=n.is(k))){if(!Object.plain(k)){i.err(a,"Invalid data: "+((e=k)&&(r=e.constructor)&&r.name||typeof e)+" at "+(a.via.back(function(t){t.get&&p.push(t.get)},p=[])||p.join("."))+"."+(g.path||[]).join("."));return}for(var b=a.seen||(a.seen=[]),w=b.length;w--;)if(k===(p=b[w]).it){s=k=p.link;break}}if(f&&s)y.node=c(y.node,f,v,k);else{if(!a.seen){i.err(a,"Data at root of graph must be a node (an object).");return}a.seen.push(l={it:k,link:{},todo:d?[]:Object.keys(k).sort().reverse(),path:(g.path||[]).slice(),up:y}),y.node=c(y.node,f,v,l.link),!d&&l.todo.length&&g.push(l);var _=a.seen.length;function $(t,e){var n=l.link["#"];e&&(e.off(),e.rid(t));var i=n||t.soul||(p=(t.$$||t.$)._||"").soul||p.link||((p=p.put||"")._||"")["#"]||p["#"]||((p=t.put||"")&&t.$$?p["#"]:(p["="]||p[":"]||"")["#"]);if(n||o(a,t.$),!i&&!y.link["#"]){(y.wait||(y.wait=[])).push(function(){$(t,e)});return}i||(i=[],(t.$$||t.$).back(function(t){if(p=t.soul||t.link)return i.push(p);i.push(t.get)}),i=i.reverse().join("/")),l.link["#"]=i,d||(((a.graph||(a.graph={}))[i]=l.node||(l.node={_:{}}))._["#"]=i),delete a.wait[_],l.wait&&setTimeout.each(l.wait,function(t){t&&t()}),a.ran(a)}(a.wait||(a.wait={}))[_]="",p=(l.ref=d?k:f?y.ref.get(f):y.ref)._,(p=k&&(k._||"")["#"]||p.soul||p.link)?$({soul:p}):l.ref.get($,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!g.length)return a.ran(a);a.turn(t)}()):(p=(f=a).via._,f.via=f.via.back(function(t){if(t.soul||!t.get)return t.$;l=f.data,(f.data={})[t.get]=l}),f.via&&f.via._.soul||(f.via=p.root.$.get(((f.data||"")._||"")["#"]||p.$.back("opt.uuid")())),f.via.put(f.data,f.ack,f)),d},i.end=function(t,e){t.end=a,t.the.to===t&&t===t.the.last&&delete e.stun,t.off()},i.err=function(t,e){(t.ack||a).call(t,t.out={err:t.err=n.log(e)}),t.ran(t)};var r,a=function(){},s=setTimeout.turn,u=n.valid,c=n.state.ify})(e,"./put"),e(function(t){var n=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),t.exports=n})(e,"./index"),e(function(t){var n,o=e("./index");o.chain.on=function(t,e,n,o){var i,r=this._;if(r.root,"string"==typeof t)return e?(i=r.on(t,e,n||r,o),n&&n.$&&(n.subs||(n.subs=[])).push(i),this):r.on(t);var a=e;return(a=!0===a?{change:!0}:a||{}).not=1,a.on=1,this.get(t,a),this},o.chain.once=function(t,e){if(e=e||{},!t){var i;return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(i=this.chain())._.nix=this.once(function(t,e){i._.on("in",this._)}),i._.lex=this._.lex,i}var r,a=this._,s=a.root,u=(a.put,String.random(7));return this.get(function(i,c,f,l){var p=this,d=p._,g=d.one||(d.one={});if(!l.stun&&""!==g[u]){if(!0===(r=o.valid(i))){y();return}"string"!=typeof r&&(clearTimeout((a.one||"")[u]),clearTimeout(g[u]),g[u]=setTimeout(y,e.wait||99))}function y(v){if(d.has||d.soul||(d={put:i,get:c}),n===(r=d.put)&&(r=((f.$$||"")._||"").put),"string"==typeof o.valid(r)&&(r=s.$.get(r)._.put)===n&&!v){g[u]=setTimeout(function(){y(1)},e.wait||99);return}l.stun||""===g[u]||(g[u]="",(a.soul||a.has)&&l.off(),t.call(p,r,d.get),clearTimeout(g[u]))}},{on:1}),this},o.chain.off=function(){var t,e=this._,n=e.back;if(n)return e.ack=0,(t=n.next)&&t[e.get]&&delete t[e.get],(t=n.any)&&(delete n.any,n.any={}),(t=n.ask)&&delete t[e.get],(t=n.put)&&delete t[e.get],(t=e.soul)&&delete n.root.graph[t],(t=e.map)&&Object.keys(t).forEach(function(e,o){(o=t[e]).link&&n.root.$.get(o.link).off()}),(t=e.next)&&Object.keys(t).forEach(function(e,n){(0,t[e]).$.off()}),e.on("off",{}),this}})(e,"./on"),e(function(t){var n=e("./index"),o=n.chain.get.next;function i(t){this.to.next(t);var e,o=this.as,i=t.$._,r=t.put;(i.soul||t.$$)&&(!(e=o.lex)||String.match(t.get||(r||"")["."],e["."]||e["#"]||e))&&n.on.link(t,o)}n.chain.get.next=function(t,e){var n;return Object.plain(e)?(n=((n=e["#"])||"")["="]||n)?t.get(n):((n=t.chain()._).lex=e,t.on("in",function(t){String.match(t.get||(t.put||"")["."],e["."]||e["#"]||e)&&n.on("in",t),this.to.next(t)}),n.$):(o||a)(t,e)},n.chain.map=function(t,e,o){var s,u,c=this._;return(Object.plain(t)&&(s=t["."]?t:{".":t},t=r),t)?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=this.chain(),this.map().on(function(e,o,i,s){var c=(t||a).call(this,e,o,i,s);if(r!==c){if(e===c)return u._.on("in",i);if(n.is(c))return u._.on("in",c._);var f={};Object.keys(i.put).forEach(function(t){f[t]=i.put[t]},f),f["="]=c,u._.on("in",{get:o,put:f})}})):(u=c.each)||((c.each=u=this.chain())._.lex=s||u._.lex||c.lex,u._.nix=this.back("nix"),this.on("in",i,u._)),u};var r,a=function(){}})(e,"./map"),e(function(t){var n=e("./index");n.chain.set=function(t,e,o){var i,r,a=this,s=a.back(-1);return(e=e||function(){},(o=o||{}).item=o.item||t,(i=((t||"")._||"")["#"])&&((t={})["#"]=i),"string"==typeof(r=n.valid(t)))?a.get(i=r).put(t,e,o):n.is(t)?(a.put(function(o){t.get(function(t,i,s){if(!t)return e.call(a,{err:n.log('Only a node can be linked! Not "'+s.put+'"!')});(r={})[t]={"#":t},o(r)},!0)}),t):(Object.plain(t)&&(t=s.get(i=a.back("opt.uuid")()).put(t)),a.get(i||s.back("opt.uuid")(7)).put(t,e,o))}})(e,"./set"),e(function(t){e("./shim");var n,o=function(){},i=JSON.parseAsync||function(t,e,n){var o,i=+new Date;try{e(o,JSON.parse(t,n),r.sucks(+new Date-i))}catch(t){e(t)}},r=JSON.stringifyAsync||function(t,e,n,o){var i,a=+new Date;try{e(i,JSON.stringify(t,n,o),r.sucks(+new Date-a))}catch(t){e(t)}};r.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),r.sucks=o)};try{t.exports=function(t){var e=function(){},o=t.opt||{};o.log=o.log||console.log,o.gap=o.gap||o.wait||0,o.max=o.max||(o.memory?998001*o.memory:3e8)*.3,o.pack=o.pack||1e-4*o.max,o.puff=o.puff||9;var a=setTimeout.turn||setTimeout,s=t.dup,u=s.check,c=s.track,f=e.hear=function(t,n){if(t){if(o.max<=t.length)return e.say({dam:"!",err:"Message too big!"},n);e===this&&(f.d+=t.length||0,++f.c);var r,s=n.SH=+new Date,u=t[0];if("["===u){i(t,function(t,i){if(t||!i)return e.say({dam:"!",err:"DAM JSON parse error."},n);console.STAT&&console.STAT(+new Date,i.length,"# on hear batch");var r=o.puff;!function t(){for(var o,s=+new Date,u=0;u<r&&(o=i[u++]);)e.hear(o,n);i=i.slice(u),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(n),i.length&&a(t,0)}()}),t="";return}if("{"===u||(t["#"]||Object.plain(t))&&(r=t))return r?f.one(r,n,s):void i(t,function(t,o){if(t||!o)return e.say({dam:"!",err:"DAM JSON parse error."},n);f.one(o,n,s)})}};function l(t){var e=t.batch,n="string"==typeof e;if(n&&(e+="]"),t.batch=t.tail=null,e&&(n?!(3>e.length):!!e.length)){if(!n)try{e=1===e.length?e[0]:JSON.stringify(e)}catch(t){return o.log("DAM JSON stringify error",t)}e&&p(e,t)}}function p(t,n){try{var o=n.wire;n.say?n.say(t):o.send&&o.send(t),e.say.d+=t.length||0,++e.say.c}catch(e){(n.queue=n.queue||[]).push(t)}}f.one=function(n,o,i){if(n.DBG&&(n.DBG=p={DBG:n.DBG}),p&&(p.h=i),p&&(p.hp=+new Date),(r=n["#"])||(r=n["#"]=String.random(9)),!(f=u(r))&&!((a=n["##"])&&(f=n["@"]||n.get&&r)&&s.check(l=f+a))){if((n._=function(){}).via=e.leap=o,(f=n["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach(function(t){this[t]=1},n._.yo={}),f=n.dam){(f=e.hear[f])&&f(n,o,t),c(r);return}(f=n.ok)&&(n._.near=f["/"]);var r,a,f,l,p,i=+new Date;p&&(p.is=i),o.SI=r,c.ed=function(t){r===t&&(c.ed=0,(t=s.s[r])&&(t.via=o,n.get&&(t.it=n)))},t.on("in",e.last=n),p&&(p.hd=+new Date),console.STAT&&console.STAT(i,+new Date-i,n.get?"msg get":n.put?"msg put":"msg"),c(r),l&&c(l),e.leap=e.last=null}},f.c=f.d=0,function(){var t,i=0;function f(t,e){var n;return e instanceof Object?(Object.keys(e).sort().forEach(d,{to:n={},on:e}),n):e}function d(t){this.to[t]=this.on[t]}e.hash=function(t,n){var o,i,s,u=+new Date;r(t.put,function r(c,f){if(o=String.hash((i||(i=s=f||"")).slice(0,32768),o),i=i.slice(32768)){a(r,0);return}console.STAT&&console.STAT(u,+new Date-u,"say json+hash"),t._.$put=s,t["##"]=o,e.say(t,n),delete t._.$put},f)},e.say=function(r,u){if((f=this)&&(f=f.to)&&f.next&&f.next(r),!r)return!1;var f,d,g,y,v=r["@"],k=r._||(r._=function(){}),b=r.DBG,w=+new Date;if(k.y=k.y||w,!u&&b&&(b.y=w),(d=r["#"])||(d=r["#"]=String.random(9)),t||c(d),!(g=r["##"])&&n!==r.put&&!k.via&&v){e.hash(r,u);return}if(!u&&v&&(u=(f=s.s[v])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=e.last)&&v===f["#"]&&e.leap),!u&&v){if(s.s[v])return;return console.STAT&&console.STAT(+new Date,++i,"total no peer to ack to"),!1}if(v&&!r.put&&!g&&((s.s[v]||"").it||"")["##"])return!1;if(!u&&e.way)return e.way(r);if(b&&(b.yh=+new Date),!(y=k.raw)){e.raw(r,u);return}if(b&&(b.yr=+new Date),!u||!u.id){if(!Object.plain(u||o.peers))return!1;var w=+new Date;o.puff;var _=o.peers,$=Object.keys(u||o.peers||{});return console.STAT&&console.STAT(w,+new Date-w,"peer keys"),void function n(){var o=+new Date;t=1;var i=k.raw;k.raw=y;for(var s,f=0;f<9&&(s=($||"")[f++]);)(s=_[s]||(u||"")[s])&&e.say(r,s);k.raw=i,t=0,$=$.slice(f),console.STAT&&console.STAT(o,+new Date-o,"say loop"),$.length&&(a(n,0),v&&c(v))}()}if(!u.wire&&e.wire&&e.wire(u),d!==u.last){if(u.last=d,u===k.via||(f=k.yo)&&(f[u.url]||f[u.pid]||f[u.id]))return!1;if(console.STAT&&console.STAT(w,((b||k).yp=+new Date)-(k.y||w),"say prep"),!t&&v&&c(v),u.batch){if(u.tail=(f=u.tail||0)+y.length,u.tail<=o.pack){u.batch+=(f?",":"")+y;return}l(u)}u.batch="[";var x=+new Date;setTimeout(function(){console.STAT&&console.STAT(x,+new Date-x,"0ms TO"),l(u)},o.gap),p(y,u),console.STAT&&v===u.SI&&console.STAT(w,+new Date-u.SH,"say ack")}},e.say.c=e.say.d=0,e.raw=function(t,i){if(!t)return"";var a,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],p=t["@"];if(l&&p){if(!f.via&&u(p+l))return!1;if(c=(s.s[p]||"").it){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam&&!t["@"]){var d=0,g=[];for(var y in c=o.peers){var v=c[y];if(g.push(v.url||v.pid||v.id),++d>6)break}d>1&&(t["><"]=g.join())}if(t.put&&(c=t.ok)&&(t.ok={"@":(c["@"]||1)-1,"/":c["/"]==t._.near?e.near:c["/"]}),a=f.$put){c={},Object.keys(t).forEach(function(e){c[e]=t[e]}),c.put=":])([:",r(c,function(t,e){if(!t){var o=+new Date;c=e.indexOf('"put":":])([:"'),k(n,e=e.slice(0,c+6)+a+e.slice(c+14)),console.STAT&&console.STAT(o,+new Date-o,"say slice")}});return}function k(n,o){n||(f.raw=o,e.say(t,i))}r(t,k)}}(),e.near=0,e.hi=function(n){var i;if(!n.wire){e.wire(n.length&&{url:n,id:n}||n);return}n.id?o.peers[n.url||n.id]=n:(i=n.id=n.id||n.url||String.random(9),e.say({dam:"?",pid:t.opt.pid},o.peers[i]=n),delete s.s[n.last]),n.met||(e.near++,n.met=+new Date,t.on("hi",n)),i=n.queue,n.queue=[],setTimeout.each(i||[],function(t){p(t,n)},0,9)},e.bye=function(n){n.met&&--e.near,delete n.met,t.on("bye",n);var o=+new Date;o-=n.met||o,e.bye.time=((e.bye.time||o)+o)/2},e.hear["!"]=function(t,e){o.log("Error:",t.err)},e.hear["?"]=function(t,n){t.pid&&(n.pid||(n.pid=t.pid),t["@"])||(e.say({dam:"?",pid:o.pid,"@":t["#"]},n),delete s.s[n.last])},e.hear.mob=function(t,n){if(t.peers){var o=Object.keys(t.peers),i=o[Math.random()*o.length>>0];i&&(e.bye(n),e.hi(i))}},t.on("create",function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",e.say)}),t.on("bye",function(t,e){t=o.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(e=t.wire)&&e.close&&e.close(),delete o.peers[t.id],t.wire=null});var d={};return t.on("bye",function(t,n){this.to.next(t),(n=console.STAT)&&(n.peers=e.near),(n=t.url)&&(d[n]=!0,setTimeout(function(){delete d[n]},o.lack||9e3))}),t.on("hi",function(n,i){if(this.to.next(n),(i=console.STAT)&&(i.peers=e.near),!o.super){var r=Object.keys(t.next||"");r.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(r,function(i){var r=t.next[i];if(o.super||(r.ask||"")[""]){e.say({get:{"#":i}},n);return}setTimeout.each(Object.keys(r.ask||""),function(o){o&&e.say({"##":String.hash((t.graph[i]||"")[o]),get:{"#":i,".":o}},n)})})}}),e}}catch(t){}})(e,"./mesh"),e(function(t){var n,o=e("./index");o.Mesh=e("./mesh"),o.on("opt",function(t){if(this.to.next(t),!t.once){var e=t.opt;if(!1!==e.WebSocket){var i=o.window||{},r=e.WebSocket||i.WebSocket||i.webkitWebSocket||i.mozWebSocket;if(r){e.WebSocket=r;var a=e.mesh=e.mesh||o.Mesh(t);a.wire||e.wire,a.wire=e.wire=c,setTimeout(function(){e.super||t.on("out",{dam:"hi"})},1);var s=1998,u=""+n!=typeof document&&document}}}function c(t){try{if(!t||!t.url)return o&&o(t);var n=t.url.replace(/^http/,"ws"),o=t.wire=new e.WebSocket(n);return o.onclose=function(){f(t),e.mesh.bye(t)},o.onerror=function(e){f(t)},o.onopen=function(){e.mesh.hi(t)},o.onmessage=function(n){n&&e.mesh.hear(n.data||n,t)},o}catch(n){e.mesh.bye(t)}}function f(t){clearTimeout(t.defer),e.peers[t.url]&&(u&&t.retry<=0||(t.retry=(t.retry||e.retry+1||60)-(-t.tried+(t.tried=+new Date)<4*s?1:0),t.defer=setTimeout(function e(){if(u&&u.hidden)return setTimeout(e,s);c(t)},s)))}})})(e,"./websocket"),e(function(t){if("undefined"!=typeof Gun){try{e=(Gun.window||function(){}).localStorage}catch(t){}e||(Gun.log("Warning: No localStorage exists to persist data to!"),e={setItem:function(t,e){this[t]=e},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}});var e,n=JSON.stringifyAsync||function(t,e,n,o){var i;try{e(i,JSON.stringify(t,n,o))}catch(t){e(t)}};Gun.on("create",function t(o){this.to.next(o);var i,r,a,s,u=o.opt,c=(o.graph,[]);if(!1!==u.localStorage){u.prefix=u.file||"gun/";try{i=t[u.prefix]=t[u.prefix]||JSON.parse(a=e.getItem(u.prefix))||{}}catch(e){i=t[u.prefix]={}}a=(a||"").length,o.on("get",function(t){this.to.next(t);var e,n,o,r,a=t.get;a&&(e=a["#"])&&((n=i[e]||r)&&(o=a["."])&&!Object.plain(o)&&(n=Gun.state.ify({},o,Gun.state.is(n,o),n[o],e)),Gun.on.get.ack(t,n))}),o.on("put",function(t){this.to.next(t);var e=t.put,n=e["#"],u=e["."],l=t["#"],p=t.ok||"";if(i[n]=Gun.state.ify(i[n],u,e[">"],e[":"],n),s&&a>4999880){o.on("in",{"@":l,err:"localStorage max!"});return}!t["@"]&&(!t._.via||Math.random()<p["@"]/p["/"])&&c.push(l),r||(r=setTimeout(f,9+a/333))})}function f(){if(!c.length&&((setTimeout.turn||"").s||"").length){setTimeout(f,99);return}var t=c;clearTimeout(r),r=!1,c=[],n(i,function(n,r){try{n||e.setItem(u.prefix,r)}catch(t){n=s=t||"localStorage failure"}n&&(Gun.log(n+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),o.on("localStorage:error",{err:n,get:u.prefix,put:i})),a=r.length,setTimeout.each(t,function(t){o.on("in",{"@":t,err:n,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){if(""+t!=typeof Gun){var t,e=function(t){console.warn("Warning! Deprecated internal utility will break in next version:",t)},n=Gun;n.fn=n.fn||{is:function(t){return e("fn"),!!t&&"function"==typeof t}},n.bi=n.bi||{is:function(t){return e("bi"),t instanceof Boolean||"boolean"==typeof t}},n.num=n.num||{is:function(t){return e("num"),!i(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},n.text=n.text||{is:function(t){return e("text"),"string"==typeof t}},n.text.ify=n.text.ify||function(t){return(e("text.ify"),n.text.is(t))?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},n.text.random=n.text.random||function(t,n){e("text.random");var o="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)o+=n.charAt(Math.floor(Math.random()*n.length)),t--;return o},n.text.match=n.text.match||function(t,n){var o,i;return e("text.match"),"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(o=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||i===n["="]&&(o=n["*"]||n[">"]||n["<"],t.slice(0,(o||"").length)===o||i===n["*"]&&(i!==n[">"]&&i!==n["<"]?t>=n[">"]&&t<=n["<"]:i!==n[">"]&&t>=n[">"]||i!==n["<"]&&t<=n["<"])))},n.text.hash=n.text.hash||function(t,n){if(e("text.hash"),"string"==typeof t){if(n=n||0,!t.length)return n;for(var o=0,i=t.length;o<i;++o)n=(n<<5)-n+t.charCodeAt(o)|0;return n}},n.list=n.list||{is:function(t){return e("list"),t instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(t){return e("list.sort"),function(e,n){return e&&n?(e=e[t])<(n=n[t])?-1:e>n?1:0:0}},n.list.map=n.list.map||function(t,n,o){return e("list.map"),u(t,n,o)},n.list.index=1,n.obj=n.boj||{is:function(t){return e("obj"),!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},n.obj.put=n.obj.put||function(t,n,o){return e("obj.put"),(t||{})[n]=o,t},n.obj.has=n.obj.has||function(t,n){return e("obj.has"),t&&Object.prototype.hasOwnProperty.call(t,n)},n.obj.del=n.obj.del||function(t,n){if(e("obj.del"),t)return t[n]=null,delete t[n],t},n.obj.as=n.obj.as||function(t,n,o,i){return e("obj.as"),t[n]=t[n]||(i===o?{}:o)},n.obj.ify=n.obj.ify||function(t){if(e("obj.ify"),a(t))return t;try{t=JSON.parse(t)}catch(e){t={}}return t},function(){var t;function o(e,n){s(this,n)&&t!==this[n]||(this[n]=e)}n.obj.to=n.obj.to||function(t,n){return e("obj.to"),u(t,o,n=n||{}),n}}(),n.obj.copy=n.obj.copy||function(t){return e("obj.copy"),t?JSON.parse(JSON.stringify(t)):t},function(){function t(t,e){var n,o=this.n;if(!(o&&(e===o||a(o)&&s(o,e)))&&n!==e)return!0}n.obj.empty=n.obj.empty||function(n,o){return e("obj.empty"),!n||!u(n,t,{n:o})}}(),function(){function t(e,n){if(2==arguments.length){t.r=t.r||{},t.r[e]=n;return}t.r=t.r||[],t.r.push(e)}var o,r=Object.keys;Object.keys=Object.keys||function(t){return o(t,function(t,e,n){n(e)})},n.obj.map=o=n.obj.map||function(o,u,c){e("obj.map");var f,l,p,d,g,y=0,v="function"==typeof u;if(t.r=f,r&&a(o)&&(d=r(o),g=!0),c=c||{},i(o)||d)for(l=(d||o).length;y<l;y++){var k=y+n.list.index;if(v){if((p=g?u.call(c,o[d[y]],d[y],t):u.call(c,o[y],k,t))!==f)return p}else if(u===o[g?d[y]:y])return d?d[y]:k}else for(y in o)if(v){if(s(o,y)&&(p=c?u.call(c,o[y],y,t):u(o[y],y,t))!==f)return p}else if(u===o[y])return y;return v?t.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(t){return e("time"),t?t instanceof Date:+new Date().getTime()};var o=n.fn.is,i=n.list.is,r=n.obj,a=r.is,s=r.has,u=r.map,c={};c.is=function(n){return e("val.is"),n!==t&&(null===n||n!==1/0&&(!!(d(n)||l(n)||p(n))||c.link.is(n)||!1))},c.link=c.rel={_:"#"},function(){c.link.is=function(n){if(e("val.link.is"),n&&n[f]&&!n._&&a(n)){var o={};if(u(n,t,o),o.id)return o.id}return!1};function t(t,e){return this.id?this.id=!1:e==f&&d(t)?void(this.id=t):this.id=!1}}(),c.link.ify=function(t){return e("val.link.ify"),g({},f,t)},n.obj.has._=".";var t,f=c.link._,l=n.bi.is,p=n.num.is,d=n.text.is,r=n.obj,a=r.is,g=r.put,u=r.map;n.val=n.val||c;var y={_:"_"};y.soul=function(t,n){return e("node.soul"),t&&t._&&t._[n||b]},y.soul.ify=function(t,n){return e("node.soul.ify"),n="string"==typeof n?{soul:n}:n||{},(t=t||{})._=t._||{},t._[b]=n.soul||t._[b]||k(),t},y.soul._=c.link._,function(){y.is=function(n,o,i){var r;return e("node.is"),!!a(n)&&!!(r=y.soul(n))&&!u(n,t,{as:i,cb:o,s:r,n:n})};function t(t,e){if(e!==y._){if(!c.is(t))return!0;this.cb&&this.cb.call(this.as,t,e,this.n,this.s)}}}(),function(){y.ify=function(o,i,r){return e("node.ify"),i?"string"==typeof i?i={soul:i}:"function"==typeof i&&(i={map:i}):i={},i.map&&(i.node=i.map.call(r,o,t,i.node||{})),(i.node=y.soul.ify(i.node||{},i))&&u(o,n,{o:i,as:r}),i.node};function n(t,e){var n,o,i=this.o;if(i.map){o===(n=i.map.call(this.as,t,""+e,i.node))?v(i.node,e):i.node&&(i.node[e]=n);return}c.is(t)&&(i.node[e]=t)}}();var r=n.obj,a=r.is,v=r.del,u=r.map,k=n.text.random,b=y.soul._;n.node=n.node||y;var w=n.state;w.lex=function(){return e("state.lex"),w().toString(36).replace(".","")},w.to=function(t,n,o){e("state.to");var i=(t||{})[n];return a(i)&&(i=_(i)),w.ify(o,n,w.is(t,n),i,y.soul(t))},function(){w.map=function(n,i,r){e("state.map");var c,f=a(f=n||i)?f:null;return(n=o(n=n||i)?n:null,f&&!n)?(i=p(i)?i:w(),f[$]=f[$]||{},u(f,t,{o:f,s:i}),f):(r=r||a(i)?i:c,i=p(i)?i:w(),function(e,o,a,u){if(!n)return t.call({o:a,s:i},e,o),e;n.call(r||this||{},e,o,a,u),s(a,o)&&c===a[o]||t.call({o:a,s:i},e,o)})};function t(t,e){$!==e&&w.ify(this.o,e,this.s)}}();var t,r=n.obj,s=(r.as,r.has),a=r.is,u=r.map,_=r.copy,p=n.num.is,o=n.fn.is,$=y._,x={};(function(){function t(t,e){if(!t||e!==y.soul(t)||!y.is(t,this.fn,this.as))return!0;this.cb&&(n.n=t,n.as=this.as,this.cb.call(n.as,t,e,n))}function n(t){t&&y.is(n.n,t,n.as)}x.is=function(n,o,i,r){return e("graph.is"),!(!n||!a(n)||j(n))&&!u(n,t,{cb:o,fn:i,as:r})}})(),function(){function o(t,e){var n;return(n=function(t,e){for(var n,o=t.seen,i=o.length;i--;)if(n=o[i],e.obj===n.obj)return n;o.push(e)}(t,e))?n:(e.env=t,e.soul=r,y.ify(e.obj,i,e)&&(e.link=e.link||c.link.ify(y.soul(e.node)),e.obj!==t.shell&&(t.graph[c.link.is(e.link)]=e.node)),e)}function i(e,n,i){var r,a,f=this.env;if(y._===n&&s(e,c.link._))return i._;if(r=u(e,n,i,this,f)){if(n||(this.node=this.node||i||{},s(e,y._)&&y.soul(e)&&(this.node._=_(e._)),this.node=y.soul.ify(this.node,c.link.is(this.link)),this.link=this.link||c.link.ify(y.soul(this.node))),(a=f.map)&&(a.call(f.as||{},e,n,i,this),s(i,n))){if(t===(e=i[n])){v(i,n);return}if(!(r=u(e,n,i,this,f)))return}return n?!0===r?e:(a=o(f,{obj:e,path:this.path.concat(n)})).node?a.link:void 0:this.node}}function r(t){var e=c.link.is(this.link),n=this.env.graph;this.link=this.link||c.link.ify(t),this.link[c.link._]=t,this.node&&this.node[y._]&&(this.node[y._][c.link._]=t),s(n,e)&&(n[t]=n[e],v(n,e))}function u(t,e,o,i,r){var s;return!!c.is(t)||(a(t)?1:(s=r.invalid)?u(t=s.call(r.as||{},t,e,o),e,o,i,r):void(r.err="Invalid value at '"+i.path.concat(e).join(".")+"'!",n.list.is(t)&&(r.err+=" Use `.set(item)` instead of an Array.")))}x.ify=function(n,i,r){e("graph.ify");var a={path:[],obj:n};return i?"string"==typeof i?i={soul:i}:"function"==typeof i&&(i.map=i):i={},"string"==typeof r&&(i.soul=i.soul||r,r=t),i.soul&&(a.link=c.link.ify(i.soul)),i.shell=(r||{}).shell,i.graph=i.graph||{},i.seen=i.seen||[],i.as=i.as||r,o(i,a),i.root=a.node,i.graph}}(),x.node=function(t){e("graph.node");var n=y.soul(t);if(n)return g({},n,t)},function(){x.to=function(n,o,i){if(e("graph.to"),n){var r={};return i=i||{seen:{}},u(n[o],t,{obj:r,graph:n,opt:i}),r}};function t(t,e){var n,o;if(y._===e){if(j(t,c.link._))return;this.obj[e]=_(t);return}if(!(n=c.link.is(t))){this.obj[e]=t;return}if(o=this.opt.seen[n]){this.obj[e]=o;return}this.obj[e]=this.opt.seen[n]=x.to(this.graph,n,this.opt)}}();var o=n.fn.is,r=n.obj,a=r.is,v=r.del,s=r.has,j=r.empty,g=r.put,u=r.map,_=r.copy;n.graph=n.graph||x}}()}),a("bn4Dc");var s={"/":t=>h(t,null,h("div",{class:"login-screen"},h("label",{class:"passkey-label"},"Enter your passkey:"),!1,h(frag,null,h("br",null),h(frag,null,h("br",null),h("input",{class:"passkey-input",type:"text",autocomplete:"off"}))),h("br",null),h(frag,null,h("br",null),h("button",{class:"passkey-submit-button",onclick:()=>alert("Pero")},"Go Man, Go!")))),"(.*)":(t="404 - Not found",()=>e=>h(e,null,t))};let u=/^[^/]+/,c=/^(:\w|\()/,f=/:\w|\(/,l=/^(?::(\w+))?(?:\(([^)]+)\))?/;var p=class{constructor(t){this.root=this.createNode(),t&&Object.entries(t).forEach(t=>this.add(...t))}createNode({regex:t,param:e,handler:n}={}){return{regex:t,param:e,handler:n,children:{string:{},regex:{}}}}add(t,e){return this.parseOptim(t,e,this.root),this}parseOptim(t,e,n){if(f.test(t))this.parse(t,e,n);else{let o=n.children.string[t];o?o.handler=e:n.children.string[t]=this.createNode({handler:e})}}parse(t,e,n){if(c.test(t)){let o=t.match(l);if(o){let i=n.children.regex[o[0]];i||(i=n.children.regex[o[0]]=this.createNode({regex:o[2]?RegExp("^"+o[2]):u,param:o[1]})),o[0].length===t.length?i.handler=e:this.parseOptim(t.slice(o[0].length),e,i)}}else{let o=t[0],i=n.children.string[o];i||(i=n.children.string[o]=this.createNode()),this.parse(t.slice(1),e,i)}}find(t){return this.findOptim(t,this.root,{})}findOptim(t,e,n){let o=e.children.string[t];return o&&void 0!==o.handler?{handler:o.handler,params:n}:this.findRecursive(t,e,n)}findRecursive(t,e,n){let o=e.children.string[t[0]];if(o){let e=this.findRecursive(t.slice(1),o,n);if(e)return e}for(let i in e.children.regex)if((o=e.children.regex[i]).regex){let e=t.match(o.regex);if(e){if(e[0].length===t.length&&void 0!==o.handler)return o.param&&(n[o.param]=decodeURIComponent(e[0])),{handler:o.handler,params:n};{let i=this.findOptim(t.slice(e[0].length),o,n);if(i)return o.param&&(n[o.param]=decodeURIComponent(e[0])),i}}}return null}};let d=(t,e)=>([n,o])=>[n,e.bind(null,o(t))],g=(t,e,n)=>{let o=new p(Object.fromEntries(Object.entries(n).map(d(t,e))));return t=>{let e=o.find(t);return console.log({match:e}),e.handler(e.params)}},y=t=>t&&t.replace(/(?<!\\)"/g,'\\"'),v=t=>t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),k=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),b=([t,e])=>{switch(typeof e){case"string":return` ${t}="${y(e)}"`;case"number":return` ${t}="${e}"`;default:return!0===e?` ${t}`:""}},w=t=>t?Object.entries(t).map(b).join(""):"",_=({tag:t,props:e,children:n})=>{switch(typeof t){case"string":return`<${t}${w(e)}${k.has(t)?" />":`>${n.map($).join("")}</${t}>`}`;case"function":return $(t({props:e,children:n}));case"object":if(null==t)return $(n)}},$=t=>{if(Array.isArray(t))return t.map($).join("");switch(t){case!0:case!1:case null:case void 0:return""}return"string"==typeof t?v(t):_(t)},x=t=>e=>S(t.childNodes[1],e,0,t),j=(t,e)=>{for(let[n,o]of Object.entries(e))"function"==typeof o&&"o"===n[0]&&"n"===n[1]&&(t[n]=o)},T=(t,{tag:e,props:n,children:o},i=0,r)=>{switch(typeof e){case"string":if(Object.keys(n).length&&j(t,n),o.length){let{childNodes:e}=t??{};return o.reduce((n,o)=>S(e[n],o,n,t)+1,0),i}return i;case"function":return S(t,e({props:n,children:o}),i,r);case"object":if(null==e)return S(t,o,i,r);default:return i}},S=(t,e,n=0,o)=>{if(Array.isArray(e)){let{childNodes:t}=o;return e.reduce((e,n,i)=>S(t[e],n,e,o)+1,n)-1}switch(e){case!0:case!1:case null:case void 0:return n-1}return"string"==typeof e?n:T(t,e,n,o)};var O=({children:t,props:{background:e="#f0f0f0",title:n=""}})=>h("html",{lang:"en"},h("head",null,h("meta",{charset:"utf-8"}),h("meta",{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"}),h("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),h("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}),h("link",{href:"https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap",rel:"stylesheet"}),h("link",{href:"https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap",rel:"stylesheet"}),h("link",{href:"https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap",rel:"stylesheet"}),h("link",{href:"https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap",rel:"stylesheet"}),h("link",{rel:"stylesheet",href:"/css/style.css"}),h("title",null,n)),h("body",null,t,h("script",{src:"/client.js"})));globalThis.h=(t,e,...n)=>({tag:t,props:e||{},children:n}),globalThis.frag=({props:t,children:e})=>({tag:null,props:t,children:e}),window.addEventListener("load",()=>{let t=g(O,x(document),s),{pathname:e}=window.location;console.log({m:m=t(e),pathname:e})});let D=[];e=".passkey-input",n=t=>{t.addEventListener("input",t=>{let{target:{value:e,selectionStart:n},data:o}=t;o?D.splice(n-1,e.length>D.length?0:D.length-e.length+1,o):D.splice(n,D.length-e.length),t.target.value=e.replaceAll(/.{1}/gi,"â€¢"),t.target.setSelectionRange(n,n)})},window.addEventListener("load",()=>{let t=document.querySelector(e);t&&n(t)})})();
//# sourceMappingURL=client.js.map

var t,n,e,o,i,r;let a;n={},e={},null==(o=(t=globalThis).parcelRequire3550)&&((o=function(t){if(t in n)return n[t].exports;if(t in e){var o=e[t];delete e[t];var i={id:t,exports:{}};return n[t]=i,o.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,n){e[t]=n},t.parcelRequire3550=o),(0,o.register)("bn4Dc",function(t,n){(function(){function n(t,e){return e?require(t):t.slice?n[o(t)]:function(e,i){t(e={exports:{}}),n[o(i)]=e.exports};function o(t){return t.split("/").slice(-1).toString().replace(".js","")}}n(function(t){String.random=function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)e+=n.charAt(Math.floor(Math.random()*n.length));return e},String.match=function(t,n){var e,o;return"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(e=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||o===n["="]&&(e=n["*"]||n[">"],t.slice(0,(e||"").length)===e||o===n["*"]&&(o!==n[">"]&&o!==n["<"]?t>=n[">"]&&t<=n["<"]:o!==n[">"]&&t>=n[">"]||o!==n["<"]&&t<=n["<"])))},String.hash=function(t,n){if("string"==typeof t){if(n=n||0,!t.length)return n;for(var e=0,o=t.length;e<o;++e)n=(n<<5)-n+t.charCodeAt(e)|0;return n}};var n,e,o,i,r,a,s,u,c,f,l,h,p,g,d,y,v,k,m=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,n){for(var e in t)if(m.call(t,e)&&(!n||-1==n.indexOf(e)))return!1;return!0},Object.keys=Object.keys||function(t){var n=[];for(var e in t)m.call(t,e)&&n.push(e);return n},i=setTimeout,r=0,a=0,s=typeof setImmediate!=""+o&&setImmediate||(typeof MessageChannel==""+o?i:((n=new MessageChannel).port1.onmessage=function(t){""==t.data&&e()},function(t){e=t,n.port2.postMessage("")})),u=i.check=i.check||typeof performance!=""+o&&performance||{now:function(){return+new Date}},i.hold=i.hold||9,i.poll=i.poll||function(t){if(i.hold>=u.now()-r&&a++<3333){t();return}s(function(){r=u.now(),t()},a=0)},h=(l=(f=setTimeout).turn=f.turn||function(t){1==h.push(t)&&p(d)}).s=[],p=f.poll,g=0,d=function(){(c=h[g++])&&c(),(g==h.length||99==g)&&(h=l.s=h.slice(g),g=0),h.length&&p(d)},k=(v=setTimeout).turn,(v.each=v.each||function(t,n,e,o){o=o||9,function i(r,a,s){if(a=(r=(t||[]).splice(0,o)).length){for(var u=0;u<a&&y===(s=n(r[u]));u++);if(y===s){k(i);return}}e&&e(s)}()})()})(n,"./shim"),n(function(t){t.exports=function t(n,e,o){if(!n)return{to:t};var i,r="function"==typeof e,n=(this.tag||(this.tag={}))[n]||r&&(this.tag[n]={tag:n,to:t._={next:function(t){var n;(n=this.to)&&n.next(t)}}});if(r){var a={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:e,the:n,on:this,as:o};return(a.back=n.last||n).to=a,n.last=a}return(n=n.to)&&i!==e&&n.next(e),n}})(n,"./onto"),n(function(t){t.exports=function(t){return null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&t!=1/0&&t!=-1/0&&t==t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}})(n,"./valid"),n(function(t){function e(){var t=+new Date;return s<t?(r=0,s=t+e.drift):s=t+(r+=1)/a+e.drift}n("./shim"),e.drift=0;var o,i=-1/0,r=0,a=999,s=i;e.is=function(t,n,e){var o=n&&t&&t._&&t._[">"]||e;if(o)return"number"==typeof(o=o[n])?o:i},e.ify=function(t,n,e,i,r){(t=t||{})._=t._||{},r&&(t._["#"]=r);var a=t._[">"]||(t._[">"]={});return o!==n&&"_"!==n&&("number"==typeof e&&(a[n]=e),o!==i&&(t[n]=i)),t},t.exports=e})(n,"./state"),n(function(t){n("./shim"),t.exports=function(t){var n={s:{}},e=n.s;t=t||{max:999,age:9e3},n.check=function(t){return!!e[t]&&o(t)};var o=n.track=function(i){var r=e[i]||(e[i]={});return r.was=n.now=+new Date,n.to||(n.to=setTimeout(n.drop,t.age+9)),o.ed&&o.ed(i),r};return n.drop=function(o){n.to=null,n.now=+new Date;var i=Object.keys(e);console.STAT&&console.STAT(n.now,+new Date-n.now,"dup drop keys"),setTimeout.each(i,function(i){var r=e[i];r&&(o||t.age)>n.now-r.was||delete e[i]},0,99)},n}})(n,"./dup"),n(function(t){n("./onto"),t.exports=function(t,n){if(this.on){var o=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var i=t["#"]||t,r=(this.tag||"")[i];if(!r)return;return n&&(clearTimeout((r=this.on(i,n)).err),r.err=setTimeout(function(){r.off()},o)),!0}var i=n&&n["#"]||e(9);if(!t)return i;var a=this.on(i,t,n);return a.err=a.err||setTimeout(function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})},o),i}};var e=String.random||function(){return Math.random().toString(36).slice(2)}})(n,"./ask"),n(function(e){function o(t){return t instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:t}):new o(t)}o.is=function(t){return t instanceof o||t&&t._&&t===t._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},n("./shim"),o.valid=n("./valid"),o.state=n("./state"),o.on=n("./onto"),o.dup=n("./dup"),o.ask=n("./ask"),function(){function t(e){if(e){if(e.out===t){this.to.next(e);return}var i,u=this.as,c=u.at||u,f=c.$,l=c.dup,h=e.DBG;if((i=e["#"])||(i=e["#"]=s(9)),!l.check(i)){if(l.track(i),i=e._,e._="function"==typeof i?i:function(){},e.$&&e.$===(e.$._||"").$||(e.$=f),e["@"]&&!e.put&&function(t){var n,e=t["@"]||"";if(!(n=e._)){var o=(o=t.$)&&(o=o._)&&(o=o.root)&&(o=o.dup);if(!(o=o.check(e)))return;t["@"]=o["#"]||t["@"];return}n.acks=(n.acks||0)+1,(n.err=t.err)&&(t["@"]=n["#"],r(n)),n.ok=t.ok||n.ok,n.stop||n.crack||(n.crack=n.match&&n.match.push(function(){a(n)})),a(n)}(e),!c.ask(e["@"],e)){if(h&&(h.u=+new Date),e.put){n(e);return}e.get&&o.on.get(e,f)}h&&(h.uc=+new Date),this.to.next(e),h&&(h.ua=+new Date),e.nts||e.NTS||(e.out=t,c.on("out",e),h&&(h.ue=+new Date))}}}function n(n){if(n){var e=n._||"",o=e.root=((e.$=n.$||"")._||"").root;if(n["@"]&&e.faith&&!e.miss){n.out=t,o.on("out",n);return}e.latch=o.hatch,e.match=o.hatch=[];var a=n.put,s=e.DBG=n.DBG,l=+new Date;if(p=p||l,!a["#"]||!a["."]){s&&(s.p=l),e["#"]=n["#"],e.msg=n,e.all=0,e.stun=1;var b=Object.keys(a);console.STAT&&console.STAT(l,((s||e).pk=+new Date)-l,"put sort");var _,w,$,x,T,j,S,O=0;!function t(o){if(_!=O){if(_=O,!($=b[O])){console.STAT&&console.STAT(l,((s||e).pd=+new Date)-l,"put"),r(e);return}(x=a[$])?(S=x._)?$!==S["#"]?j=g+d($)+"soul not same.":(T=S[">"])||(j=g+d($)+"no state."):j=g+d($)+"no meta.":j=g+d($)+"no node.",w=Object.keys(x||{})}if(j){n.err=e.err=j,r(e);return}var p,D=0;for(o=o||0;o++<9&&(p=w[D++]);)if("_"!==p){var A=x[p],G=T[p];if(i===G){j=g+d(p)+"on"+d($)+"no state.";break}if(!c(A)){j=g+d(p)+"on"+d($)+"bad "+typeof A+d(A);break}(function t(n,e,o,i,r){var a,s=r._||"",u=s.root,c=u.graph,l=c[o]||h,p=f(l,e,1),g=l[e],d=s.DBG;(a=console.STAT)&&(!c[o]||!g)&&(a.has=(a.has||0)+1);var m=k();if(i>m){setTimeout(function(){t(n,e,o,i,r)},(a=i-m)>v?v:a),console.STAT&&console.STAT((d||s).Hf=+new Date,a,"future");return}if(!(i<p)){if(!s.faith&&i===p&&(n===g||y(n)<=y(g))&&!s.miss)return;s.stun++;var b=r["#"]+s.all++,_={toString:function(){return b},_:s};_.toJSON=_.toString,u.dup.track(_)["#"]=r["#"],d&&(d.ph=d.ph||+new Date),u.on("put",{"#":_,"@":r["@"],put:{"#":o,".":e,":":n,">":i},ok:r.ok,_:s})}})(A,p,$,G,n),++m}if((w=w.slice(D)).length){u(t);return}++O,w=null,t(o)}()}}}function e(t){(n=(t._||"").DBG)&&(n.pa=+new Date,n.pm=n.pm||+new Date);var n,e,o=this.as,i=o.graph,a=t._,s=t.put,u=s["#"],c=s["."],f=s[":"],h=s[">"];t["#"],(e=a.msg)&&(e=e.put)&&(e=e[u])&&l(e,c,h,f,u),i[u]=l(i[u],c,h,f,u),(e=(o.next||"")[u])&&e.on("in",t),r(a),this.to.next(t)}function r(n,e){if(!(n.stop||!n.err&&0<--n.stun)&&(n.stop=1,o=n.root)){var o,i=n.match;i.end=1,i===o.hatch&&((i=n.latch)&&!i.end?o.hatch=i:delete o.hatch),n.hatch&&n.hatch(),setTimeout.each(n.match,function(t){t&&t()}),(e=n.msg)&&!n.err&&!e.err&&(e.out=t,n.root.on("out",e),b())}}function a(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?i:t.ok||{"":1}}))}o.create=function(n){n.root=n.root||n,n.graph=n.graph||{},n.on=n.on||o.on,n.ask=n.ask||o.ask,n.dup=n.dup||o.dup();var i=n.$.opt(n.opt);return n.once||(n.on("in",t,n),n.on("out",t,n),n.on("put",e,n),o.on("create",n),n.on("create",n)),n.once=1,i},o.on.put=n;var p,g="Error: Invalid graph!",d=function(t){return" '"+(""+t).slice(0,9)+"...' "},y=JSON.stringify,v=2147483647,k=o.state,m=0,b=function(){m>999&&-(m/(p-(p=+new Date)))>1&&(o.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),b=function(){m=0})}}(),function(){function t(t,n){var e=+new Date,o=t._||{},r=o.DBG=t.DBG,a=t["#"],u=s(9),c=Object.keys(n||"").sort(),h=((n||"")._||"")["#"],p=(c.length,t.$._.root),g=n===p.graph[h];console.STAT&&console.STAT(e,((r||o).gk=+new Date)-e,"got keys"),n&&function t(){e=+new Date;for(var o,d,y,v=0,k={};v<9&&(d=c[v++]);)l(k,d,f(n,d),n[d],h);c=c.slice(v),(y={})[h]=k,k=y,g&&((o=function(){}).ram=o.faith=!0),y=c.length,console.STAT&&console.STAT(e,-(e-(e=+new Date)),"got copied some"),r&&(r.ga=+new Date),p.on("in",{"@":a,"#":u,put:k,"%":y?u=s(9):i,$:p.$,_:o,DBG:r,FOO:1}),console.STAT&&console.STAT(e,+new Date-e,"got in"),y&&setTimeout.turn(t)}(),n||p.on("in",{"@":t["#"]})}o.on.get=function(n,e){var o=e._,r=n.get,a=r["#"],s=o.graph[a],u=r["."],c=(o.next||(o.next={}))[a],h=(n._||{}).DBG=n.DBG;if(h&&(h.g=+new Date),!s)return o.on("get",n);if(u){if(("string"!=typeof u||i===s[u])&&!((c||"").next||"")[u]){o.on("get",n);return}s=l({},u,f(s,u),s[u],a)}s&&t(n,s),o.on("get",n)},o.on.get.ack=t}(),o.chain.opt=function(t){t=t||{};var n=this._,e=t.peers||t;return Object.plain(t)||(t={}),Object.plain(n.opt)||(n.opt=t),"string"==typeof e&&(e=[e]),Object.plain(n.opt.peers)||(n.opt.peers={}),e instanceof Array&&(t.peers={},e.forEach(function(e){var o={};o.id=o.url=e,t.peers[e]=n.opt.peers[e]=n.opt.peers[e]||o})),a(t,function t(n){var e=this[n];if(this&&this.hasOwnProperty(n)||"string"==typeof e||Object.empty(e)){this[n]=e;return}(!e||e.constructor===Object||e instanceof Array)&&a(e,t)}),n.opt.from=t,o.on("opt",n),n.opt.uuid=n.opt.uuid||function(t){return o.state().toString(36).replace(".","")+String.random(t||12)},this};var i,r,a=function(t,n){Object.keys(t).forEach(n,t)},s=String.random,u=setTimeout.turn,c=o.valid,f=o.state.is,l=o.state.ify,h={};o.log=function(){return o.log.off||r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(t,n,e){return(e=o.log.once)[t]=e[t]||0,e[t]++||o.log(n)},"undefined"!=typeof window&&((window.GUN=window.Gun=o).window=window);try{void 0!==t&&(t.exports=o)}catch(t){}e.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(r=console).only=function(t,n){return r.only.i&&t===r.only.i&&r.only.i++&&(r.log.apply(r,arguments)||n)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(n,"./root"),n(function(t){n("./root").chain.back=function(t,n){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var i=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var r=0,a=t.length,s=i;r<a;r++)s=(s||o)[t[r]];return e!==s?n?this:s:(s=i.back)?s.$.back(t,n):void 0}if("function"==typeof t){for(var u,s={back:i};(s=s.back)&&e===(u=t(s,n)););return u}return"number"==typeof t?(i.back||i).$.back(t-1):this};var e,o={}})(n,"./back"),n(function(t){var e=n("./root");function o(t,n){if(n=n||this.as||t.$._,(!t.$$||this===e.on)&&t.put&&!n.soul){var o,i=t.put||"",r=i["="]||i[":"],a=n.root,s=a.$.get(i["#"]).get(i["."])._;if("string"!=typeof(r=c(r))){this===e.on&&((s.echo||(s.echo={}))[n.id]=n);return}if(!(s.echo||(s.echo={}))[n.id]||(a.pass||"")[n.id]){if(o=a.pass){if(o[r+n.id])return;o[r+n.id]=1}(s.echo||(s.echo={}))[n.id]=n,n.has&&(n.link=r);var u=a.$.get(s.link=r)._;(u.echo||(u.echo={}))[s.id]=s;var o=n.ask||"";(o[""]||n.lex)&&u.on("out",{get:{"#":r}}),setTimeout.each(Object.keys(o),function(t,n){t&&(n=o[t])&&n.on("out",{get:{"#":r,".":t}})},0,99)}}}function i(t,n){var e,o,r=t.put||"",s=a!==r["="]?r["="]:r[":"],u=n.root;if(a===s){if(n.soul&&a!==n.put||(o=(t.$$||t.$||"")._||"",t["@"]&&(a!==o.put||a!==n.put)))return;(e=n.link||t.linked)&&delete(u.$.get(e)._.echo||"")[n.id],n.has&&(n.link=null),n.put=a,setTimeout.each(Object.keys(n.next||""),function(t,o){(o=n.next[t])&&(e&&delete(u.$.get(e).get(t)._.echo||"")[o.id],o.on("in",{get:t,put:a,$:o.$}))},0,99);return}if(!n.soul&&!t.$$){if(e=c(s),o=t.$._||"",(e===o.link||n.has&&!o.link)&&(!(u.pass||"")[n.id]||"string"==typeof e))return;delete(o.echo||"")[n.id],i({get:n.get,put:a,$:t.$,linked:t.linked=t.linked||o.link},n)}}function r(t,n){var o=this.as,i=o.$._,r=(i.root,o.get||""),s=(t.put||"")[r["#"]]||"";if(!t.put||"string"==typeof r["."]&&a===s[r["."]]){if(a!==i.put||!i.soul&&!i.has)return;i.ack=(i.ack||0)+1,i.on("in",{get:i.get,put:i.put=a,$:i.$,"@":t["@"]});return}(t._||{}).miss=1,e.on.put(t)}e.chain.chain=function(t){var n,o=this._,i=new(t||this).constructor(this),r=i._;return r.root=n=o.root,r.id=++n.once,r.back=this._,r.on=e.on,r.on("in",e.on.in,r),r.on("out",e.on.out,r),i},e.on.out=function(t){var n,e,o=this.as,i=o.back,s=o.root;if(t.$||(t.$=o.$),this.to.next(t),o.err){o.on("in",{put:o.put=a,$:o.$});return}if(n=t.get){if(s.pass&&(s.pass[o.id]=o),o.lex&&Object.keys(o.lex).forEach(function(t){e[t]=o.lex[t]},e=t.get=t.get||{}),n["#"]||o.soul){if(n["#"]=n["#"]||o.soul,t["#"]||(t["#"]=u(9)),i=s.$.get(n["#"])._,n=n["."]){if(f(i.put,n)&&(e=i.ask&&i.ask[n],(i.ask||(i.ask={}))[n]=i.$.get(n)._,i.on("in",{get:n,put:{"#":i.soul,".":n,":":i.put[n],">":h(s.graph[i.soul],n)}}),e))return}else{if(e=i.ask&&i.ask[""],(i.ask||(i.ask={}))[""]=i,a!==i.put&&(i.on("in",i),e))return;t.$=i.$}return s.ask(r,t),s.on("in",t)}if(n["."])return o.get?(t={get:{".":o.get},$:o.$},(i.ask||(i.ask={}))[o.get]=t.$._):t={get:o.lex?t.get:{},$:o.$},i.on("out",t);(o.ask||(o.ask={}))[""]=o,o.get&&(n["."]=o.get,(i.ask||(i.ask={}))[o.get]=t.$._)}return i.on("out",t)},e.on.in=function(t,n){var e,r=(n=n||this.as).root,u=t.$||(t.$=n.$),f=(u||"")._||s,l=t.put||"",g=l["#"],d=l["."],y=a!==l["="]?l["="]:l[":"],v=l[">"]||-1/0;if(a!==t.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"])){if(!c(l)){if(!(g=((l||"")._||"")["#"])){console.log("chain not yet supported for",l,"...",t,n);return}return u=n.root.$.get(g),setTimeout.each(Object.keys(l).sort(),function(e){"_"!=e&&a!==(v=h(l,e))&&n.on("in",{$:u,put:{"#":g,".":e,"=":l[e],">":v},VIA:t})})}return void n.on("in",{$:f.back.$,put:{"#":g=f.back.soul,".":d=f.has||f.get,"=":l,">":h(f.back.put,d)},via:t})}(t.seen||"")[n.id]||((t.seen||(t.seen=function(){}))[n.id]=n,n!==f&&(Object.keys(t).forEach(function(n){l[n]=t[n]},l={}),l.get=n.get||l.get,n.soul||n.has?f.soul&&(l.$=n.$,l.$$=l.$$||f.$):l.$$$=l.$$$||n.$,t=l),i(t,n),(n.soul||t.$$)&&v>=h(r.graph[g],d)&&((l=r.$.get(g)._).put=p(l.put,d,v,y,g)),!f.soul&&v>=h(r.graph[g],d)&&(e=(r.$.get(g)._.next||"")[d])&&(e.put=y,"string"==typeof(l=c(y))&&(e.put=r.$.get(l)._.put||y)),this.to&&this.to.next(t),n.any&&setTimeout.each(Object.keys(n.any),function(e){(e=n.any[e])&&e(t)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(e){(e=n.echo[e])&&e.on("in",t)},0,99),((t.$$||"")._||f).soul&&(e=n.next)&&(e=e[d])&&(l={},Object.keys(t).forEach(function(n){l[n]=t[n]}),l.$=(t.$$||t.$).get(l.get=d),delete l.$$,delete l.$$$,e.on("in",l)),o(t,n))},e.on.link=o,e.on.unlink=i;var a,s={},u=String.random,c=e.valid,f=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},l=e.state,h=l.is,p=l.ify})(n,"./chain"),n(function(t){var e=n("./root");function o(t){var n,e=this.at||this.on;if(!t||e.soul||e.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){if(e.map,(n=this.seen||(this.seen={}))[t])return!0;n[t]=!0}}e.chain.get=function(t,n,s){if("string"==typeof t){if(0==t.length)return(u=this.chain())._.err={err:e.log("0 length key!",t)},n&&n.call(u,u._.err),u;var u,c,f,l,h,p=this._;(u=(p.next||r)[t])||(u=t&&(l=(f=this._).next,h=this.chain()._,l||(l=f.next={}),l[h.get=t]=h,this===f.root.$?h.soul=t:(f.soul||f.has)&&(h.has=t),h)),u=u&&u.$}else if("function"==typeof t){if(!0===n)return d=this._,y=0,(g=d.soul||d.link)?t(g,s,d):d.jam?d.jam.push([t,s]):(d.jam=[[t,s]],this.get(function(t,n){if(!(i===t.put&&!d.root.opt.super&&(g=Object.keys(d.root.opt.peers).length)&&++y<=g)){n.rid(t);var o,r=(r=t.$)&&r._||{},a=0;for(g=d.jam,delete d.jam;o=g[a++];){var s=o[0];o=o[1],s&&s(r.link||r.soul||e.valid(t.put)||((t.put||{})._||{})["#"],o,t,n)}}},{out:{get:{".":!0}}})),this;u=this;var g,d,y,v,p=u._,k=n||{},m=p.root;k.at=p,k.ok=t;var b={};function _(t,n,o){if(!_.stun&&(!(r=m.pass)||r[v])){var r,a=t.$._,s=(t.$$||"")._,u=(s||a).put,c=!a.has&&!a.soul,f={};if((c||i===u)&&(u=i===((r=t.put)||"")["="]?i===(r||"")[":"]?r:r[":"]:r["="]),"string"==typeof(r=e.valid(u))&&(u=i===(r=m.$.get(r)._.put)?k.not?i:u:r),!k.not||i!==u){if(i===k.stun){if((r=m.stun)&&r.on&&(p.$.back(function(t){if(r.on(""+t.id,f={}),(f.run||0)<_.id)return f}),f.run||r.on(""+a.id,f={}),!f.run&&s&&r.on(""+s.id,f={}),_.id>f.run&&((!f.stun||f.stun.end)&&(f.stun=r.on("stun"),f.stun=f.stun&&f.stun.last),f.stun&&!f.stun.end))){(f.stun.add||(f.stun.add={}))[v]=function(){_(t,n,1)};return}if(i===u&&(o=0),(r=m.hatch)&&!r.end&&i===k.hatch&&!o){if(b[a.$._.id])return;b[a.$._.id]=1,r.push(function(){_(t,n,1)});return}b={}}if(m.pass){if(m.pass[v+a.id])return;m.pass[v+a.id]=1}if(k.on){k.ok.call(a.$,u,a.get,t,n||_);return}if(k.v2020){k.ok(t,n||_);return}Object.keys(t).forEach(function(n){r[n]=t[n]},r={}),(t=r).put=u,k.ok.call(k.as,t,n||_)}}}return _.at=p,(p.any||(p.any={}))[v=String.random(7)]=_,_.off=function(){_.stun=1,p.any&&delete p.any[v]},_.rid=o,_.id=k.run||++m.once,c=m.pass,(m.pass={})[v]=1,k.out=k.out||{get:{}},p.on("out",k.out),m.pass=c,u}else{if("number"==typeof t)return this.get(""+t,n,s);if("string"==typeof(c=a(t)))return this.get(c,n,s);(c=this.get.next)&&(u=c(this,t))}return u?n&&"function"==typeof n&&u.get(n,s):((u=this.chain())._.err={err:e.log("Invalid get request!",t)},n&&n.call(u,u._.err)),u};var i,r={},a=e.valid})(n,"./get"),n(function(t){var e=n("./root");function o(t,n){if(n){n=(n._||"").id||n;var o,i=t.root.stun||(t.root.stun={on:e.on}),r={};t.stun||(t.stun=i.on("stun",function(){})),(o=i.on(""+n))&&o.the.last.next(r),r.run>=t.run||i.on(""+n,function(n){if(t.stun.end){this.off(),this.to.next(n);return}n.run=n.run||t.run,n.stun=n.stun||t.stun})}}function i(t){if(t.err){i.end(t.stun,t.root);return}if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var n,o=t.$.back(-1)._,r=o.root,a=o.ask(function(n){r.on("ack",n),n.err&&!n.lack&&e.log(n),++s>(t.acks||0)&&this.off(),t.ack&&t.ack(n,this)},t.opt),s=0,u=t.stun;(n=function(){u&&(i.end(u,r),setTimeout.each(Object.keys(u=u.add||""),function(t){(t=u[t])&&t()}))}).hatch=n,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":a,_:n})}}e.chain.put=function(t,n,a){var f,l,h,p=this,g=p._,d=g.root;(a=a||{}).root=g.root,a.run||(a.run=d.once),o(a,g.id),a.ack=a.ack||n,a.via=a.via||p,a.data=a.data||t,a.soul||(a.soul=g.soul||"string"==typeof n&&n);var y=a.state=a.state||e.state();return"function"==typeof t?t(function(t){a.data=t,p.put(r,r,a)}):a.soul?(a.$=d.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||i,function t(){var n,r,s,f,l,h,p,g=a.todo,d=g.pop(),v=d.it;if(d.ref&&d.ref._.id,o(a,d.ref),(h=d.todo)&&(v=v[f=h.pop()],h.length&&g.push(d)),f&&(g.path||(g.path=[])).push(f),!(s=u(v))&&!(p=e.is(v))){if(!Object.plain(v)){i.err(a,"Invalid data: "+((n=v)&&(r=n.constructor)&&r.name||typeof n)+" at "+(a.via.back(function(t){t.get&&h.push(t.get)},h=[])||h.join("."))+"."+(g.path||[]).join("."));return}for(var k=a.seen||(a.seen=[]),m=k.length;m--;)if(v===(h=k[m]).it){s=v=h.link;break}}if(f&&s)d.node=c(d.node,f,y,v);else{if(!a.seen){i.err(a,"Data at root of graph must be a node (an object).");return}a.seen.push(l={it:v,link:{},todo:p?[]:Object.keys(v).sort().reverse(),path:(g.path||[]).slice(),up:d}),d.node=c(d.node,f,y,l.link),!p&&l.todo.length&&g.push(l);var b=a.seen.length;function _(t,n){var e=l.link["#"];n&&(n.off(),n.rid(t));var i=e||t.soul||(h=(t.$$||t.$)._||"").soul||h.link||((h=h.put||"")._||"")["#"]||h["#"]||((h=t.put||"")&&t.$$?h["#"]:(h["="]||h[":"]||"")["#"]);if(e||o(a,t.$),!i&&!d.link["#"]){(d.wait||(d.wait=[])).push(function(){_(t,n)});return}i||(i=[],(t.$$||t.$).back(function(t){if(h=t.soul||t.link)return i.push(h);i.push(t.get)}),i=i.reverse().join("/")),l.link["#"]=i,p||(((a.graph||(a.graph={}))[i]=l.node||(l.node={_:{}}))._["#"]=i),delete a.wait[b],l.wait&&setTimeout.each(l.wait,function(t){t&&t()}),a.ran(a)}(a.wait||(a.wait={}))[b]="",h=(l.ref=p?v:f?d.ref.get(f):d.ref)._,(h=v&&(v._||"")["#"]||h.soul||h.link)?_({soul:h}):l.ref.get(_,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!g.length)return a.ran(a);a.turn(t)}()):(h=(f=a).via._,f.via=f.via.back(function(t){if(t.soul||!t.get)return t.$;l=f.data,(f.data={})[t.get]=l}),f.via&&f.via._.soul||(f.via=h.root.$.get(((f.data||"")._||"")["#"]||h.$.back("opt.uuid")())),f.via.put(f.data,f.ack,f)),p},i.end=function(t,n){t.end=a,t.the.to===t&&t===t.the.last&&delete n.stun,t.off()},i.err=function(t,n){(t.ack||a).call(t,t.out={err:t.err=e.log(n)}),t.ran(t)};var r,a=function(){},s=setTimeout.turn,u=e.valid,c=e.state.ify})(n,"./put"),n(function(t){var e=n("./root");n("./chain"),n("./back"),n("./put"),n("./get"),t.exports=e})(n,"./index"),n(function(t){var e,o=n("./index");o.chain.on=function(t,n,e,o){var i,r=this._;if(r.root,"string"==typeof t)return n?(i=r.on(t,n,e||r,o),e&&e.$&&(e.subs||(e.subs=[])).push(i),this):r.on(t);var a=n;return(a=!0===a?{change:!0}:a||{}).not=1,a.on=1,this.get(t,a),this},o.chain.once=function(t,n){if(n=n||{},!t){var i;return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(i=this.chain())._.nix=this.once(function(t,n){i._.on("in",this._)}),i._.lex=this._.lex,i}var r,a=this._,s=a.root,u=(a.put,String.random(7));return this.get(function(i,c,f,l){var h=this,p=h._,g=p.one||(p.one={});if(!l.stun&&""!==g[u]){if(!0===(r=o.valid(i))){d();return}"string"!=typeof r&&(clearTimeout((a.one||"")[u]),clearTimeout(g[u]),g[u]=setTimeout(d,n.wait||99))}function d(y){if(p.has||p.soul||(p={put:i,get:c}),e===(r=p.put)&&(r=((f.$$||"")._||"").put),"string"==typeof o.valid(r)&&(r=s.$.get(r)._.put)===e&&!y){g[u]=setTimeout(function(){d(1)},n.wait||99);return}l.stun||""===g[u]||(g[u]="",(a.soul||a.has)&&l.off(),t.call(h,r,p.get),clearTimeout(g[u]))}},{on:1}),this},o.chain.off=function(){var t,n=this._,e=n.back;if(e)return n.ack=0,(t=e.next)&&t[n.get]&&delete t[n.get],(t=e.any)&&(delete e.any,e.any={}),(t=e.ask)&&delete t[n.get],(t=e.put)&&delete t[n.get],(t=n.soul)&&delete e.root.graph[t],(t=n.map)&&Object.keys(t).forEach(function(n,o){(o=t[n]).link&&e.root.$.get(o.link).off()}),(t=n.next)&&Object.keys(t).forEach(function(n,e){(0,t[n]).$.off()}),n.on("off",{}),this}})(n,"./on"),n(function(t){var e=n("./index"),o=e.chain.get.next;function i(t){this.to.next(t);var n,o=this.as,i=t.$._,r=t.put;(i.soul||t.$$)&&(!(n=o.lex)||String.match(t.get||(r||"")["."],n["."]||n["#"]||n))&&e.on.link(t,o)}e.chain.get.next=function(t,n){var e;return Object.plain(n)?(e=((e=n["#"])||"")["="]||e)?t.get(e):((e=t.chain()._).lex=n,t.on("in",function(t){String.match(t.get||(t.put||"")["."],n["."]||n["#"]||n)&&e.on("in",t),this.to.next(t)}),e.$):(o||a)(t,n)},e.chain.map=function(t,n,o){var s,u,c=this._;return(Object.plain(t)&&(s=t["."]?t:{".":t},t=r),t)?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=this.chain(),this.map().on(function(n,o,i,s){var c=(t||a).call(this,n,o,i,s);if(r!==c){if(n===c)return u._.on("in",i);if(e.is(c))return u._.on("in",c._);var f={};Object.keys(i.put).forEach(function(t){f[t]=i.put[t]},f),f["="]=c,u._.on("in",{get:o,put:f})}})):(u=c.each)||((c.each=u=this.chain())._.lex=s||u._.lex||c.lex,u._.nix=this.back("nix"),this.on("in",i,u._)),u};var r,a=function(){}})(n,"./map"),n(function(t){var e=n("./index");e.chain.set=function(t,n,o){var i,r,a=this,s=a.back(-1);return(n=n||function(){},(o=o||{}).item=o.item||t,(i=((t||"")._||"")["#"])&&((t={})["#"]=i),"string"==typeof(r=e.valid(t)))?a.get(i=r).put(t,n,o):e.is(t)?(a.put(function(o){t.get(function(t,i,s){if(!t)return n.call(a,{err:e.log('Only a node can be linked! Not "'+s.put+'"!')});(r={})[t]={"#":t},o(r)},!0)}),t):(Object.plain(t)&&(t=s.get(i=a.back("opt.uuid")()).put(t)),a.get(i||s.back("opt.uuid")(7)).put(t,n,o))}})(n,"./set"),n(function(t){n("./shim");var e,o=function(){},i=JSON.parseAsync||function(t,n,e){var o,i=+new Date;try{n(o,JSON.parse(t,e),r.sucks(+new Date-i))}catch(t){n(t)}},r=JSON.stringifyAsync||function(t,n,e,o){var i,a=+new Date;try{n(i,JSON.stringify(t,e,o),r.sucks(+new Date-a))}catch(t){n(t)}};r.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),r.sucks=o)};try{t.exports=function(t){var n=function(){},o=t.opt||{};o.log=o.log||console.log,o.gap=o.gap||o.wait||0,o.max=o.max||(o.memory?998001*o.memory:3e8)*.3,o.pack=o.pack||1e-4*o.max,o.puff=o.puff||9;var a=setTimeout.turn||setTimeout,s=t.dup,u=s.check,c=s.track,f=n.hear=function(t,e){if(t){if(o.max<=t.length)return n.say({dam:"!",err:"Message too big!"},e);n===this&&(f.d+=t.length||0,++f.c);var r,s=e.SH=+new Date,u=t[0];if("["===u){i(t,function(t,i){if(t||!i)return n.say({dam:"!",err:"DAM JSON parse error."},e);console.STAT&&console.STAT(+new Date,i.length,"# on hear batch");var r=o.puff;!function t(){for(var o,s=+new Date,u=0;u<r&&(o=i[u++]);)n.hear(o,e);i=i.slice(u),console.STAT&&console.STAT(s,+new Date-s,"hear loop"),l(e),i.length&&a(t,0)}()}),t="";return}if("{"===u||(t["#"]||Object.plain(t))&&(r=t))return r?f.one(r,e,s):void i(t,function(t,o){if(t||!o)return n.say({dam:"!",err:"DAM JSON parse error."},e);f.one(o,e,s)})}};function l(t){var n=t.batch,e="string"==typeof n;if(e&&(n+="]"),t.batch=t.tail=null,n&&(e?!(3>n.length):!!n.length)){if(!e)try{n=1===n.length?n[0]:JSON.stringify(n)}catch(t){return o.log("DAM JSON stringify error",t)}n&&h(n,t)}}function h(t,e){try{var o=e.wire;e.say?e.say(t):o.send&&o.send(t),n.say.d+=t.length||0,++n.say.c}catch(n){(e.queue=e.queue||[]).push(t)}}f.one=function(e,o,i){if(e.DBG&&(e.DBG=h={DBG:e.DBG}),h&&(h.h=i),h&&(h.hp=+new Date),(r=e["#"])||(r=e["#"]=String.random(9)),!(f=u(r))&&!((a=e["##"])&&(f=e["@"]||e.get&&r)&&s.check(l=f+a))){if((e._=function(){}).via=n.leap=o,(f=e["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach(function(t){this[t]=1},e._.yo={}),f=e.dam){(f=n.hear[f])&&f(e,o,t),c(r);return}(f=e.ok)&&(e._.near=f["/"]);var r,a,f,l,h,i=+new Date;h&&(h.is=i),o.SI=r,c.ed=function(t){r===t&&(c.ed=0,(t=s.s[r])&&(t.via=o,e.get&&(t.it=e)))},t.on("in",n.last=e),h&&(h.hd=+new Date),console.STAT&&console.STAT(i,+new Date-i,e.get?"msg get":e.put?"msg put":"msg"),c(r),l&&c(l),n.leap=n.last=null}},f.c=f.d=0,function(){var t,i=0;function f(t,n){var e;return n instanceof Object?(Object.keys(n).sort().forEach(p,{to:e={},on:n}),e):n}function p(t){this.to[t]=this.on[t]}n.hash=function(t,e){var o,i,s,u=+new Date;r(t.put,function r(c,f){if(o=String.hash((i||(i=s=f||"")).slice(0,32768),o),i=i.slice(32768)){a(r,0);return}console.STAT&&console.STAT(u,+new Date-u,"say json+hash"),t._.$put=s,t["##"]=o,n.say(t,e),delete t._.$put},f)},n.say=function(r,u){if((f=this)&&(f=f.to)&&f.next&&f.next(r),!r)return!1;var f,p,g,d,y=r["@"],v=r._||(r._=function(){}),k=r.DBG,m=+new Date;if(v.y=v.y||m,!u&&k&&(k.y=m),(p=r["#"])||(p=r["#"]=String.random(9)),t||c(p),!(g=r["##"])&&e!==r.put&&!v.via&&y){n.hash(r,u);return}if(!u&&y&&(u=(f=s.s[y])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=n.last)&&y===f["#"]&&n.leap),!u&&y){if(s.s[y])return;return console.STAT&&console.STAT(+new Date,++i,"total no peer to ack to"),!1}if(y&&!r.put&&!g&&((s.s[y]||"").it||"")["##"])return!1;if(!u&&n.way)return n.way(r);if(k&&(k.yh=+new Date),!(d=v.raw)){n.raw(r,u);return}if(k&&(k.yr=+new Date),!u||!u.id){if(!Object.plain(u||o.peers))return!1;var m=+new Date;o.puff;var b=o.peers,_=Object.keys(u||o.peers||{});return console.STAT&&console.STAT(m,+new Date-m,"peer keys"),void function e(){var o=+new Date;t=1;var i=v.raw;v.raw=d;for(var s,f=0;f<9&&(s=(_||"")[f++]);)(s=b[s]||(u||"")[s])&&n.say(r,s);v.raw=i,t=0,_=_.slice(f),console.STAT&&console.STAT(o,+new Date-o,"say loop"),_.length&&(a(e,0),y&&c(y))}()}if(!u.wire&&n.wire&&n.wire(u),p!==u.last){if(u.last=p,u===v.via||(f=v.yo)&&(f[u.url]||f[u.pid]||f[u.id]))return!1;if(console.STAT&&console.STAT(m,((k||v).yp=+new Date)-(v.y||m),"say prep"),!t&&y&&c(y),u.batch){if(u.tail=(f=u.tail||0)+d.length,u.tail<=o.pack){u.batch+=(f?",":"")+d;return}l(u)}u.batch="[";var w=+new Date;setTimeout(function(){console.STAT&&console.STAT(w,+new Date-w,"0ms TO"),l(u)},o.gap),h(d,u),console.STAT&&y===u.SI&&console.STAT(m,+new Date-u.SH,"say ack")}},n.say.c=n.say.d=0,n.raw=function(t,i){if(!t)return"";var a,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],h=t["@"];if(l&&h){if(!f.via&&u(h+l))return!1;if(c=(s.s[h]||"").it){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam&&!t["@"]){var p=0,g=[];for(var d in c=o.peers){var y=c[d];if(g.push(y.url||y.pid||y.id),++p>6)break}p>1&&(t["><"]=g.join())}if(t.put&&(c=t.ok)&&(t.ok={"@":(c["@"]||1)-1,"/":c["/"]==t._.near?n.near:c["/"]}),a=f.$put){c={},Object.keys(t).forEach(function(n){c[n]=t[n]}),c.put=":])([:",r(c,function(t,n){if(!t){var o=+new Date;c=n.indexOf('"put":":])([:"'),v(e,n=n.slice(0,c+6)+a+n.slice(c+14)),console.STAT&&console.STAT(o,+new Date-o,"say slice")}});return}function v(e,o){e||(f.raw=o,n.say(t,i))}r(t,v)}}(),n.near=0,n.hi=function(e){var i;if(!e.wire){n.wire(e.length&&{url:e,id:e}||e);return}e.id?o.peers[e.url||e.id]=e:(i=e.id=e.id||e.url||String.random(9),n.say({dam:"?",pid:t.opt.pid},o.peers[i]=e),delete s.s[e.last]),e.met||(n.near++,e.met=+new Date,t.on("hi",e)),i=e.queue,e.queue=[],setTimeout.each(i||[],function(t){h(t,e)},0,9)},n.bye=function(e){e.met&&--n.near,delete e.met,t.on("bye",e);var o=+new Date;o-=e.met||o,n.bye.time=((n.bye.time||o)+o)/2},n.hear["!"]=function(t,n){o.log("Error:",t.err)},n.hear["?"]=function(t,e){t.pid&&(e.pid||(e.pid=t.pid),t["@"])||(n.say({dam:"?",pid:o.pid,"@":t["#"]},e),delete s.s[e.last])},n.hear.mob=function(t,e){if(t.peers){var o=Object.keys(t.peers),i=o[Math.random()*o.length>>0];i&&(n.bye(e),n.hi(i))}},t.on("create",function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",n.say)}),t.on("bye",function(t,n){t=o.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(n=t.wire)&&n.close&&n.close(),delete o.peers[t.id],t.wire=null});var p={};return t.on("bye",function(t,e){this.to.next(t),(e=console.STAT)&&(e.peers=n.near),(e=t.url)&&(p[e]=!0,setTimeout(function(){delete p[e]},o.lack||9e3))}),t.on("hi",function(e,i){if(this.to.next(e),(i=console.STAT)&&(i.peers=n.near),!o.super){var r=Object.keys(t.next||"");r.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(r,function(i){var r=t.next[i];if(o.super||(r.ask||"")[""]){n.say({get:{"#":i}},e);return}setTimeout.each(Object.keys(r.ask||""),function(o){o&&n.say({"##":String.hash((t.graph[i]||"")[o]),get:{"#":i,".":o}},e)})})}}),n}}catch(t){}})(n,"./mesh"),n(function(t){var e,o=n("./index");o.Mesh=n("./mesh"),o.on("opt",function(t){if(this.to.next(t),!t.once){var n=t.opt;if(!1!==n.WebSocket){var i=o.window||{},r=n.WebSocket||i.WebSocket||i.webkitWebSocket||i.mozWebSocket;if(r){n.WebSocket=r;var a=n.mesh=n.mesh||o.Mesh(t);a.wire||n.wire,a.wire=n.wire=c,setTimeout(function(){n.super||t.on("out",{dam:"hi"})},1);var s=1998,u=""+e!=typeof document&&document}}}function c(t){try{if(!t||!t.url)return o&&o(t);var e=t.url.replace(/^http/,"ws"),o=t.wire=new n.WebSocket(e);return o.onclose=function(){f(t),n.mesh.bye(t)},o.onerror=function(n){f(t)},o.onopen=function(){n.mesh.hi(t)},o.onmessage=function(e){e&&n.mesh.hear(e.data||e,t)},o}catch(e){n.mesh.bye(t)}}function f(t){clearTimeout(t.defer),n.peers[t.url]&&(u&&t.retry<=0||(t.retry=(t.retry||n.retry+1||60)-(-t.tried+(t.tried=+new Date)<4*s?1:0),t.defer=setTimeout(function n(){if(u&&u.hidden)return setTimeout(n,s);c(t)},s)))}})})(n,"./websocket"),n(function(t){if("undefined"!=typeof Gun){try{n=(Gun.window||function(){}).localStorage}catch(t){}n||(Gun.log("Warning: No localStorage exists to persist data to!"),n={setItem:function(t,n){this[t]=n},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}});var n,e=JSON.stringifyAsync||function(t,n,e,o){var i;try{n(i,JSON.stringify(t,e,o))}catch(t){n(t)}};Gun.on("create",function t(o){this.to.next(o);var i,r,a,s,u=o.opt,c=(o.graph,[]);if(!1!==u.localStorage){u.prefix=u.file||"gun/";try{i=t[u.prefix]=t[u.prefix]||JSON.parse(a=n.getItem(u.prefix))||{}}catch(n){i=t[u.prefix]={}}a=(a||"").length,o.on("get",function(t){this.to.next(t);var n,e,o,r,a=t.get;a&&(n=a["#"])&&((e=i[n]||r)&&(o=a["."])&&!Object.plain(o)&&(e=Gun.state.ify({},o,Gun.state.is(e,o),e[o],n)),Gun.on.get.ack(t,e))}),o.on("put",function(t){this.to.next(t);var n=t.put,e=n["#"],u=n["."],l=t["#"],h=t.ok||"";if(i[e]=Gun.state.ify(i[e],u,n[">"],n[":"],e),s&&a>4999880){o.on("in",{"@":l,err:"localStorage max!"});return}!t["@"]&&(!t._.via||Math.random()<h["@"]/h["/"])&&c.push(l),r||(r=setTimeout(f,9+a/333))})}function f(){if(!c.length&&((setTimeout.turn||"").s||"").length){setTimeout(f,99);return}var t=c;clearTimeout(r),r=!1,c=[],e(i,function(e,r){try{e||n.setItem(u.prefix,r)}catch(t){e=s=t||"localStorage failure"}e&&(Gun.log(e+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),o.on("localStorage:error",{err:e,get:u.prefix,put:i})),a=r.length,setTimeout.each(t,function(t){o.on("in",{"@":t,err:e,ok:0})},0,99)})}})}})(n,"./localStorage")})(),function(){if(""+t!=typeof Gun){var t,n=function(t){console.warn("Warning! Deprecated internal utility will break in next version:",t)},e=Gun;e.fn=e.fn||{is:function(t){return n("fn"),!!t&&"function"==typeof t}},e.bi=e.bi||{is:function(t){return n("bi"),t instanceof Boolean||"boolean"==typeof t}},e.num=e.num||{is:function(t){return n("num"),!i(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},e.text=e.text||{is:function(t){return n("text"),"string"==typeof t}},e.text.ify=e.text.ify||function(t){return(n("text.ify"),e.text.is(t))?t:"undefined"!=typeof JSON?JSON.stringify(t):t&&t.toString?t.toString():t},e.text.random=e.text.random||function(t,e){n("text.random");var o="";for(t=t||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)o+=e.charAt(Math.floor(Math.random()*e.length)),t--;return o},e.text.match=e.text.match||function(t,e){var o,i;return n("text.match"),"string"==typeof t&&("string"==typeof e&&(e={"=":e}),t===(o=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||i===e["="]&&(o=e["*"]||e[">"]||e["<"],t.slice(0,(o||"").length)===o||i===e["*"]&&(i!==e[">"]&&i!==e["<"]?t>=e[">"]&&t<=e["<"]:i!==e[">"]&&t>=e[">"]||i!==e["<"]&&t<=e["<"])))},e.text.hash=e.text.hash||function(t,e){if(n("text.hash"),"string"==typeof t){if(e=e||0,!t.length)return e;for(var o=0,i=t.length;o<i;++o)e=(e<<5)-e+t.charCodeAt(o)|0;return e}},e.list=e.list||{is:function(t){return n("list"),t instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(t){return n("list.sort"),function(n,e){return n&&e?(n=n[t])<(e=e[t])?-1:n>e?1:0:0}},e.list.map=e.list.map||function(t,e,o){return n("list.map"),u(t,e,o)},e.list.index=1,e.obj=e.boj||{is:function(t){return n("obj"),!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},e.obj.put=e.obj.put||function(t,e,o){return n("obj.put"),(t||{})[e]=o,t},e.obj.has=e.obj.has||function(t,e){return n("obj.has"),t&&Object.prototype.hasOwnProperty.call(t,e)},e.obj.del=e.obj.del||function(t,e){if(n("obj.del"),t)return t[e]=null,delete t[e],t},e.obj.as=e.obj.as||function(t,e,o,i){return n("obj.as"),t[e]=t[e]||(i===o?{}:o)},e.obj.ify=e.obj.ify||function(t){if(n("obj.ify"),a(t))return t;try{t=JSON.parse(t)}catch(n){t={}}return t},function(){var t;function o(n,e){s(this,e)&&t!==this[e]||(this[e]=n)}e.obj.to=e.obj.to||function(t,e){return n("obj.to"),u(t,o,e=e||{}),e}}(),e.obj.copy=e.obj.copy||function(t){return n("obj.copy"),t?JSON.parse(JSON.stringify(t)):t},function(){function t(t,n){var e,o=this.n;if(!(o&&(n===o||a(o)&&s(o,n)))&&e!==n)return!0}e.obj.empty=e.obj.empty||function(e,o){return n("obj.empty"),!e||!u(e,t,{n:o})}}(),function(){function t(n,e){if(2==arguments.length){t.r=t.r||{},t.r[n]=e;return}t.r=t.r||[],t.r.push(n)}var o,r=Object.keys;Object.keys=Object.keys||function(t){return o(t,function(t,n,e){e(n)})},e.obj.map=o=e.obj.map||function(o,u,c){n("obj.map");var f,l,h,p,g,d=0,y="function"==typeof u;if(t.r=f,r&&a(o)&&(p=r(o),g=!0),c=c||{},i(o)||p)for(l=(p||o).length;d<l;d++){var v=d+e.list.index;if(y){if((h=g?u.call(c,o[p[d]],p[d],t):u.call(c,o[d],v,t))!==f)return h}else if(u===o[g?p[d]:d])return p?p[d]:v}else for(d in o)if(y){if(s(o,d)&&(h=c?u.call(c,o[d],d,t):u(o[d],d,t))!==f)return h}else if(u===o[d])return d;return y?t.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(t){return n("time"),t?t instanceof Date:+new Date().getTime()};var o=e.fn.is,i=e.list.is,r=e.obj,a=r.is,s=r.has,u=r.map,c={};c.is=function(e){return n("val.is"),e!==t&&(null===e||e!==1/0&&(!!(p(e)||l(e)||h(e))||c.link.is(e)||!1))},c.link=c.rel={_:"#"},function(){c.link.is=function(e){if(n("val.link.is"),e&&e[f]&&!e._&&a(e)){var o={};if(u(e,t,o),o.id)return o.id}return!1};function t(t,n){return this.id?this.id=!1:n==f&&p(t)?void(this.id=t):this.id=!1}}(),c.link.ify=function(t){return n("val.link.ify"),g({},f,t)},e.obj.has._=".";var t,f=c.link._,l=e.bi.is,h=e.num.is,p=e.text.is,r=e.obj,a=r.is,g=r.put,u=r.map;e.val=e.val||c;var d={_:"_"};d.soul=function(t,e){return n("node.soul"),t&&t._&&t._[e||k]},d.soul.ify=function(t,e){return n("node.soul.ify"),e="string"==typeof e?{soul:e}:e||{},(t=t||{})._=t._||{},t._[k]=e.soul||t._[k]||v(),t},d.soul._=c.link._,function(){d.is=function(e,o,i){var r;return n("node.is"),!!a(e)&&!!(r=d.soul(e))&&!u(e,t,{as:i,cb:o,s:r,n:e})};function t(t,n){if(n!==d._){if(!c.is(t))return!0;this.cb&&this.cb.call(this.as,t,n,this.n,this.s)}}}(),function(){d.ify=function(o,i,r){return n("node.ify"),i?"string"==typeof i?i={soul:i}:"function"==typeof i&&(i={map:i}):i={},i.map&&(i.node=i.map.call(r,o,t,i.node||{})),(i.node=d.soul.ify(i.node||{},i))&&u(o,e,{o:i,as:r}),i.node};function e(t,n){var e,o,i=this.o;if(i.map){o===(e=i.map.call(this.as,t,""+n,i.node))?y(i.node,n):i.node&&(i.node[n]=e);return}c.is(t)&&(i.node[n]=t)}}();var r=e.obj,a=r.is,y=r.del,u=r.map,v=e.text.random,k=d.soul._;e.node=e.node||d;var m=e.state;m.lex=function(){return n("state.lex"),m().toString(36).replace(".","")},m.to=function(t,e,o){n("state.to");var i=(t||{})[e];return a(i)&&(i=b(i)),m.ify(o,e,m.is(t,e),i,d.soul(t))},function(){m.map=function(e,i,r){n("state.map");var c,f=a(f=e||i)?f:null;return(e=o(e=e||i)?e:null,f&&!e)?(i=h(i)?i:m(),f[_]=f[_]||{},u(f,t,{o:f,s:i}),f):(r=r||a(i)?i:c,i=h(i)?i:m(),function(n,o,a,u){if(!e)return t.call({o:a,s:i},n,o),n;e.call(r||this||{},n,o,a,u),s(a,o)&&c===a[o]||t.call({o:a,s:i},n,o)})};function t(t,n){_!==n&&m.ify(this.o,n,this.s)}}();var t,r=e.obj,s=(r.as,r.has),a=r.is,u=r.map,b=r.copy,h=e.num.is,o=e.fn.is,_=d._,w={};(function(){function t(t,n){if(!t||n!==d.soul(t)||!d.is(t,this.fn,this.as))return!0;this.cb&&(e.n=t,e.as=this.as,this.cb.call(e.as,t,n,e))}function e(t){t&&d.is(e.n,t,e.as)}w.is=function(e,o,i,r){return n("graph.is"),!(!e||!a(e)||$(e))&&!u(e,t,{cb:o,fn:i,as:r})}})(),function(){function o(t,n){var e;return(e=function(t,n){for(var e,o=t.seen,i=o.length;i--;)if(e=o[i],n.obj===e.obj)return e;o.push(n)}(t,n))?e:(n.env=t,n.soul=r,d.ify(n.obj,i,n)&&(n.link=n.link||c.link.ify(d.soul(n.node)),n.obj!==t.shell&&(t.graph[c.link.is(n.link)]=n.node)),n)}function i(n,e,i){var r,a,f=this.env;if(d._===e&&s(n,c.link._))return i._;if(r=u(n,e,i,this,f)){if(e||(this.node=this.node||i||{},s(n,d._)&&d.soul(n)&&(this.node._=b(n._)),this.node=d.soul.ify(this.node,c.link.is(this.link)),this.link=this.link||c.link.ify(d.soul(this.node))),(a=f.map)&&(a.call(f.as||{},n,e,i,this),s(i,e))){if(t===(n=i[e])){y(i,e);return}if(!(r=u(n,e,i,this,f)))return}return e?!0===r?n:(a=o(f,{obj:n,path:this.path.concat(e)})).node?a.link:void 0:this.node}}function r(t){var n=c.link.is(this.link),e=this.env.graph;this.link=this.link||c.link.ify(t),this.link[c.link._]=t,this.node&&this.node[d._]&&(this.node[d._][c.link._]=t),s(e,n)&&(e[t]=e[n],y(e,n))}function u(t,n,o,i,r){var s;return!!c.is(t)||(a(t)?1:(s=r.invalid)?u(t=s.call(r.as||{},t,n,o),n,o,i,r):void(r.err="Invalid value at '"+i.path.concat(n).join(".")+"'!",e.list.is(t)&&(r.err+=" Use `.set(item)` instead of an Array.")))}w.ify=function(e,i,r){n("graph.ify");var a={path:[],obj:e};return i?"string"==typeof i?i={soul:i}:"function"==typeof i&&(i.map=i):i={},"string"==typeof r&&(i.soul=i.soul||r,r=t),i.soul&&(a.link=c.link.ify(i.soul)),i.shell=(r||{}).shell,i.graph=i.graph||{},i.seen=i.seen||[],i.as=i.as||r,o(i,a),i.root=a.node,i.graph}}(),w.node=function(t){n("graph.node");var e=d.soul(t);if(e)return g({},e,t)},function(){w.to=function(e,o,i){if(n("graph.to"),e){var r={};return i=i||{seen:{}},u(e[o],t,{obj:r,graph:e,opt:i}),r}};function t(t,n){var e,o;if(d._===n){if($(t,c.link._))return;this.obj[n]=b(t);return}if(!(e=c.link.is(t))){this.obj[n]=t;return}if(o=this.opt.seen[e]){this.obj[n]=o;return}this.obj[n]=this.opt.seen[e]=w.to(this.graph,e,this.opt)}}();var o=e.fn.is,r=e.obj,a=r.is,y=r.del,s=r.has,$=r.empty,g=r.put,u=r.map,b=r.copy;e.graph=e.graph||w}}()}),o("bn4Dc"),a=[],i=".passkey-input",r=t=>{t.addEventListener("input",t=>{let{target:{value:n,selectionStart:e},data:o}=t;o?a.splice(e-1,n.length>a.length?0:a.length-n.length+1,o):a.splice(e,a.length-n.length),t.target.value=n.replaceAll(/.{1}/gi,"•"),t.target.setSelectionRange(e,e)})},window.addEventListener("load",()=>{let t=document.querySelector(i);t&&r(t)});
//# sourceMappingURL=client.js.map
